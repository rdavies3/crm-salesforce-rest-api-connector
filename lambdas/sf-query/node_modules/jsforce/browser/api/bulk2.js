import _Reflect$construct from "@babel/runtime-corejs3/core-js-stable/reflect/construct";
import _Object$getOwnPropertySymbols from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols";
import _filterInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/filter";
import _Object$getOwnPropertyDescriptor from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor";
import _forEachInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/for-each";
import _Object$getOwnPropertyDescriptors from "@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors";
import _Object$defineProperties from "@babel/runtime-corejs3/core-js-stable/object/define-properties";
import _Object$defineProperty from "@babel/runtime-corejs3/core-js-stable/object/define-property";
import _sliceInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/slice";
import _Array$from from "@babel/runtime-corejs3/core-js-stable/array/from";
import _Symbol from "@babel/runtime-corejs3/core-js-stable/symbol";
import _getIteratorMethod from "@babel/runtime-corejs3/core-js/get-iterator-method";
import _slicedToArray from "@babel/runtime-corejs3/helpers/slicedToArray";
import _objectWithoutProperties from "@babel/runtime-corejs3/helpers/objectWithoutProperties";
import _asyncToGenerator from "@babel/runtime-corejs3/helpers/asyncToGenerator";
import _defineProperty from "@babel/runtime-corejs3/helpers/defineProperty";
import _typeof from "@babel/runtime-corejs3/helpers/typeof";
import _createClass from "@babel/runtime-corejs3/helpers/createClass";
import _classCallCheck from "@babel/runtime-corejs3/helpers/classCallCheck";
import _possibleConstructorReturn from "@babel/runtime-corejs3/helpers/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime-corejs3/helpers/getPrototypeOf";
import _inherits from "@babel/runtime-corejs3/helpers/inherits";
import _wrapNativeSuper from "@babel/runtime-corejs3/helpers/wrapNativeSuper";
var _excluded = ["pollInterval", "pollTimeout", "input"],
  _excluded2 = ["Id", "type", "attributes"];
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof _Symbol !== "undefined" && _getIteratorMethod(o) || o["@@iterator"]; if (!it) { if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { var _context29; if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = _sliceInstanceProperty(_context29 = Object.prototype.toString.call(o)).call(_context29, 8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return _Array$from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function ownKeys(e, r) { var t = _Object$keys2(e); if (_Object$getOwnPropertySymbols) { var o = _Object$getOwnPropertySymbols(e); r && (o = _filterInstanceProperty(o).call(o, function (r) { return _Object$getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context27, _context28; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _forEachInstanceProperty(_context27 = ownKeys(Object(t), !0)).call(_context27, function (r) { _defineProperty(e, r, t[r]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(e, _Object$getOwnPropertyDescriptors(t)) : _forEachInstanceProperty(_context28 = ownKeys(Object(t))).call(_context28, function (r) { _Object$defineProperty(e, r, _Object$getOwnPropertyDescriptor(t, r)); }); } return e; }
import _regeneratorRuntime from "@babel/runtime-corejs3/regenerator";
import _Array$isArray from "@babel/runtime-corejs3/core-js-stable/array/is-array";
import _includesInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/includes";
import _JSON$stringify from "@babel/runtime-corejs3/core-js-stable/json/stringify";
import _Date$now from "@babel/runtime-corejs3/core-js-stable/date/now";
import _concatInstanceProperty from "@babel/runtime-corejs3/core-js-stable/instance/concat";
import _URL from "@babel/runtime-corejs3/core-js-stable/url";
import _Promise from "@babel/runtime-corejs3/core-js-stable/promise";
import _Object$keys2 from "@babel/runtime-corejs3/core-js-stable/object/keys";
import _setTimeout from "@babel/runtime-corejs3/core-js-stable/set-timeout";
import "core-js/modules/es.error.cause.js";
import "core-js/modules/es.array.iterator.js";
import "core-js/modules/es.array.push.js";
import "core-js/modules/es.function.name.js";
import "core-js/modules/es.map.js";
import "core-js/modules/es.object.keys.js";
import "core-js/modules/es.object.to-string.js";
import "core-js/modules/es.regexp.exec.js";
import "core-js/modules/es.regexp.test.js";
import "core-js/modules/es.regexp.to-string.js";
import "core-js/modules/es.set.js";
import "core-js/modules/web.dom-exception.constructor.js";
import "core-js/modules/web.dom-exception.stack.js";
import "core-js/modules/web.dom-exception.to-string-tag.js";
import "core-js/modules/web.structured-clone.js";
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? _Reflect$construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
import { EventEmitter } from 'events';
import { Writable } from 'stream';
import { Serializable, Parsable } from '../record-stream';
import HttpApi from '../http-api';
import { registerModule } from '../jsforce';
import { getLogger } from '../util/logger';
import { concatStreamsAsDuplex } from '../util/stream';
import is from '@sindresorhus/is';
var JobPollingTimeoutError = /*#__PURE__*/function (_Error) {
  /**
   *
   */
  function JobPollingTimeoutError(message, jobId) {
    var _this;
    _classCallCheck(this, JobPollingTimeoutError);
    _this = _callSuper(this, JobPollingTimeoutError, [message]);
    _this.name = 'JobPollingTimeout';
    _this.jobId = jobId;
    return _this;
  }
  _inherits(JobPollingTimeoutError, _Error);
  return _createClass(JobPollingTimeoutError);
}( /*#__PURE__*/_wrapNativeSuper(Error));
var BulkApiV2 = /*#__PURE__*/function (_HttpApi) {
  function BulkApiV2() {
    _classCallCheck(this, BulkApiV2);
    return _callSuper(this, BulkApiV2, arguments);
  }
  _inherits(BulkApiV2, _HttpApi);
  return _createClass(BulkApiV2, [{
    key: "hasErrorInResponseBody",
    value: function hasErrorInResponseBody(body) {
      return _Array$isArray(body) && _typeof(body[0]) === 'object' && 'errorCode' in body[0];
    }
  }, {
    key: "isSessionExpired",
    value: function isSessionExpired(response) {
      var _context;
      return response.statusCode === 401 && _includesInstanceProperty(_context = response.body).call(_context, 'INVALID_SESSION_ID');
    }
  }, {
    key: "parseError",
    value: function parseError(body) {
      return {
        errorCode: body[0].errorCode,
        message: body[0].message
      };
    }
  }]);
}(HttpApi);
export var BulkV2 = /*#__PURE__*/function () {
  function BulkV2(connection) {
    _classCallCheck(this, BulkV2);
    /**
     * Polling interval in milliseconds
     *
     * Default: 1000 (1 second)
     */
    _defineProperty(this, "pollInterval", 1000);
    /**
     * Polling timeout in milliseconds
     *
     * Default: 30000 (30 seconds)
     */
    _defineProperty(this, "pollTimeout", 30000);
    this.connection = connection;
    this.logger = this.connection._logLevel ? getLogger('bulk2').createInstance(this.connection._logLevel) : getLogger('bulk2');
  }

  /**
   * Create an instance of an ingest job object.
   *
   * @params {NewIngestJobOptions} options object
   * @returns {IngestJobV2} An ingest job instance
   * @example
   * // Upsert records to the Account object.
   *
   * const job = connection.bulk2.createJob({
   *   operation: 'insert'
   *   object: 'Account',
   * });
   *
   * // create the job in the org
   * await job.open()
   *
   * // upload data
   * await job.uploadData(csvFile)
   *
   * // finished uploading data, mark it as ready for processing
   * await job.close()
   */
  return _createClass(BulkV2, [{
    key: "createJob",
    value: function createJob(options) {
      return new IngestJobV2(this.connection, {
        bodyParams: options,
        pollingOptions: this
      });
    }

    /**
     * Get an ingest or query job instance specified by a given job ID
     *
     * @param options Options object with a job ID
     * @returns IngestJobV2 An ingest job
     */
  }, {
    key: "job",
    value: function job() {
      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'ingest';
      var options = arguments.length > 1 ? arguments[1] : undefined;
      if (type === 'ingest') {
        return new IngestJobV2(this.connection, {
          id: options.id,
          pollingOptions: this
        });
      } else {
        return new QueryJobV2(this.connection, {
          id: options.id,
          pollingOptions: this
        });
      }
    }

    /**
     * Create, upload, and start bulkload job
     */
  }, {
    key: "loadAndWaitForResults",
    value: (function () {
      var _loadAndWaitForResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(options) {
        var pollInterval, pollTimeout, input, createJobOpts, job, err;
        return _regeneratorRuntime.wrap(function _callee$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!options.pollTimeout) options.pollTimeout = this.pollTimeout;
              if (!options.pollInterval) options.pollInterval = this.pollInterval;
              pollInterval = options.pollInterval, pollTimeout = options.pollTimeout, input = options.input, createJobOpts = _objectWithoutProperties(options, _excluded);
              job = this.createJob(createJobOpts);
              _context2.prev = 4;
              _context2.next = 7;
              return job.open();
            case 7:
              _context2.next = 9;
              return job.uploadData(input);
            case 9:
              _context2.next = 11;
              return job.close();
            case 11:
              _context2.next = 13;
              return job.poll(pollInterval, pollTimeout);
            case 13:
              _context2.next = 15;
              return job.getAllResults();
            case 15:
              return _context2.abrupt("return", _context2.sent);
            case 18:
              _context2.prev = 18;
              _context2.t0 = _context2["catch"](4);
              err = _context2.t0;
              this.logger.error("bulk load failed due to: ".concat(err.message));
              if (err.name !== 'JobPollingTimeoutError') {
                // fires off one last attempt to clean up and ignores the result | error
                job.delete().catch(function (ignored) {
                  return ignored;
                });
              }
              throw err;
            case 24:
            case "end":
              return _context2.stop();
          }
        }, _callee, this, [[4, 18]]);
      }));
      function loadAndWaitForResults(_x) {
        return _loadAndWaitForResults.apply(this, arguments);
      }
      return loadAndWaitForResults;
    }()
    /**
     * Execute bulk query and get a record stream.
     *
     * Default timeout: 10000ms
     *
     * @param soql SOQL query
     * @param options
     *
     * @returns {RecordStream} - Record stream, convertible to a CSV data stream
     */
    )
  }, {
    key: "query",
    value: (function () {
      var _query = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(soql, options) {
        var queryJob, recordStream, dataStream, queryRecordsStream, err;
        return _regeneratorRuntime.wrap(function _callee2$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              queryJob = new QueryJobV2(this.connection, {
                bodyParams: {
                  query: soql,
                  operation: options !== null && options !== void 0 && options.scanAll ? 'queryAll' : 'query',
                  columnDelimiter: options === null || options === void 0 ? void 0 : options.columnDelimiter,
                  lineEnding: options === null || options === void 0 ? void 0 : options.lineEnding
                },
                pollingOptions: this
              });
              recordStream = new Parsable();
              dataStream = recordStream.stream('csv');
              _context3.prev = 3;
              _context3.next = 6;
              return queryJob.open();
            case 6:
              _context3.next = 8;
              return queryJob.poll(options === null || options === void 0 ? void 0 : options.pollInterval, options === null || options === void 0 ? void 0 : options.pollTimeout);
            case 8:
              _context3.next = 10;
              return queryJob.result().then(function (s) {
                return s.stream();
              });
            case 10:
              queryRecordsStream = _context3.sent;
              queryRecordsStream.pipe(dataStream);
              _context3.next = 20;
              break;
            case 14:
              _context3.prev = 14;
              _context3.t0 = _context3["catch"](3);
              err = _context3.t0;
              this.logger.error("bulk query failed due to: ".concat(err.message));
              if (err.name !== 'JobPollingTimeoutError') {
                // fires off one last attempt to clean up and ignores the result | error
                queryJob.delete().catch(function (ignored) {
                  return ignored;
                });
              }
              throw err;
            case 20:
              return _context3.abrupt("return", recordStream);
            case 21:
            case "end":
              return _context3.stop();
          }
        }, _callee2, this, [[3, 14]]);
      }));
      function query(_x2, _x3) {
        return _query.apply(this, arguments);
      }
      return query;
    }())
  }]);
}();
export var QueryJobV2 = /*#__PURE__*/function (_EventEmitter) {
  function QueryJobV2(conn, options) {
    var _this2;
    _classCallCheck(this, QueryJobV2);
    _this2 = _callSuper(this, QueryJobV2);
    _this2.connection = conn;
    _this2.logger = _this2.connection._logLevel ? getLogger('bulk2:QueryJobV2').createInstance(_this2.connection._logLevel) : getLogger('bulk2:QueryJobV2');
    if ('id' in options) {
      _this2._id = options.id;
    } else {
      _this2.bodyParams = options.bodyParams;
    }
    _this2.pollingOptions = options.pollingOptions;
    // default error handler to keep the latest error
    _this2.on('error', function (error) {
      return _this2.error = error;
    });
    return _this2;
  }

  /**
   * Get the query job ID.
   *
   * @returns {string} query job Id.
   */
  _inherits(QueryJobV2, _EventEmitter);
  return _createClass(QueryJobV2, [{
    key: "id",
    get: function get() {
      return this.jobInfo ? this.jobInfo.id : this._id;
    }

    /**
     * Get the query job info.
     *
     * @returns {Promise<QueryJobInfoV2>} query job information.
     */
  }, {
    key: "getInfo",
    value: function getInfo() {
      if (this.jobInfo) {
        return this.jobInfo;
      }
      throw new Error('No internal job info. Make sure to call `await job.check`.');
    }

    /**
     * Creates a query job
     *
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
  }, {
    key: "open",
    value: (function () {
      var _open = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {
        return _regeneratorRuntime.wrap(function _callee3$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (this.bodyParams) {
                _context4.next = 2;
                break;
              }
              throw new Error('Missing required body params to open a new query job.');
            case 2:
              _context4.prev = 2;
              _context4.next = 5;
              return this.createQueryRequest({
                method: 'POST',
                body: _JSON$stringify(this.bodyParams),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 5:
              this.jobInfo = _context4.sent;
              this.logger.debug("Successfully created job ".concat(this.id));
              this.emit('open', this.jobInfo);
              _context4.next = 14;
              break;
            case 10:
              _context4.prev = 10;
              _context4.t0 = _context4["catch"](2);
              this.emit('error', _context4.t0);
              throw _context4.t0;
            case 14:
              return _context4.abrupt("return", this.jobInfo);
            case 15:
            case "end":
              return _context4.stop();
          }
        }, _callee3, this, [[2, 10]]);
      }));
      function open() {
        return _open.apply(this, arguments);
      }
      return open;
    }()
    /**
     * Abort the job
     *
     * The 'aborted' event is emitted when the job successfully aborts.
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
    )
  }, {
    key: "abort",
    value: (function () {
      var _abort = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {
        var state;
        return _regeneratorRuntime.wrap(function _callee4$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.prev = 0;
              state = 'Aborted';
              _context5.next = 4;
              return this.createQueryRequest({
                method: 'PATCH',
                path: "/".concat(this.id),
                body: _JSON$stringify({
                  state: state
                }),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 4:
              this.jobInfo = _context5.sent;
              this.logger.debug("Successfully aborted job ".concat(this.id));
              return _context5.abrupt("return", this.jobInfo);
            case 9:
              _context5.prev = 9;
              _context5.t0 = _context5["catch"](0);
              this.emit('error', _context5.t0);
              throw _context5.t0;
            case 13:
            case "end":
              return _context5.stop();
          }
        }, _callee4, this, [[0, 9]]);
      }));
      function abort() {
        return _abort.apply(this, arguments);
      }
      return abort;
    }()
    /**
     * Poll for the state of the processing for the job.
     *
     * @param interval Polling interval in milliseconds
     * @param timeout Polling timeout in milliseconds
     * @returns {Promise<Record[]>} A promise that resolves when the job finished being processed.
     */
    )
  }, {
    key: "poll",
    value: (function () {
      var _poll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {
        var _context6, _context7;
        var interval,
          timeout,
          jobId,
          startTime,
          endTime,
          res,
          timeoutError,
          _args5 = arguments;
        return _regeneratorRuntime.wrap(function _callee5$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              interval = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : this.pollingOptions.pollInterval;
              timeout = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : this.pollingOptions.pollTimeout;
              jobId = this.id;
              startTime = _Date$now();
              endTime = startTime + timeout;
              this.logger.debug('Start polling for job status');
              this.logger.debug(_concatInstanceProperty(_context6 = "Polling options: timeout:".concat(timeout, "ms | interval: ")).call(_context6, interval, "ms."));
              if (!(timeout === 0)) {
                _context8.next = 9;
                break;
              }
              throw new JobPollingTimeoutError("Skipping polling because of timeout = 0ms. Job Id = ".concat(jobId), jobId);
            case 9:
              if (!(endTime > _Date$now())) {
                _context8.next = 35;
                break;
              }
              _context8.prev = 10;
              _context8.next = 13;
              return this.check();
            case 13:
              res = _context8.sent;
              _context8.t0 = res.state;
              _context8.next = _context8.t0 === 'Aborted' ? 17 : _context8.t0 === 'UploadComplete' ? 18 : _context8.t0 === 'InProgress' ? 18 : _context8.t0 === 'Failed' ? 22 : _context8.t0 === 'JobComplete' ? 24 : 27;
              break;
            case 17:
              throw new Error('Job has been aborted');
            case 18:
              this.emit('inProgress', res);
              _context8.next = 21;
              return delay(interval);
            case 21:
              return _context8.abrupt("break", 27);
            case 22:
              // unlike ingest jobs, the API doesn't return an error msg:
              // https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/query_get_one_job.htm
              this.logger.debug(res);
              throw new Error('Query job failed to complete');
            case 24:
              this.logger.debug("Job ".concat(this.id, " was successfully processed."));
              this.emit('jobComplete', res);
              return _context8.abrupt("return");
            case 27:
              _context8.next = 33;
              break;
            case 29:
              _context8.prev = 29;
              _context8.t1 = _context8["catch"](10);
              this.emit('error', _context8.t1);
              throw _context8.t1;
            case 33:
              _context8.next = 9;
              break;
            case 35:
              timeoutError = new JobPollingTimeoutError(_concatInstanceProperty(_context7 = "Polling timed out after ".concat(timeout, "ms. Job Id = ")).call(_context7, jobId), jobId);
              this.emit('error', timeoutError);
              throw timeoutError;
            case 38:
            case "end":
              return _context8.stop();
          }
        }, _callee5, this, [[10, 29]]);
      }));
      function poll() {
        return _poll.apply(this, arguments);
      }
      return poll;
    }()
    /**
     * Check the latest job status
     *
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
    )
  }, {
    key: "check",
    value: (function () {
      var _check = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {
        var jobInfo;
        return _regeneratorRuntime.wrap(function _callee6$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              _context9.prev = 0;
              _context9.next = 3;
              return this.createQueryRequest({
                method: 'GET',
                path: "/".concat(this.id),
                responseType: 'application/json'
              });
            case 3:
              jobInfo = _context9.sent;
              this.jobInfo = jobInfo;
              return _context9.abrupt("return", jobInfo);
            case 8:
              _context9.prev = 8;
              _context9.t0 = _context9["catch"](0);
              this.emit('error', _context9.t0);
              throw _context9.t0;
            case 12:
            case "end":
              return _context9.stop();
          }
        }, _callee6, this, [[0, 8]]);
      }));
      function check() {
        return _check.apply(this, arguments);
      }
      return check;
    }()
    /**
     * Get the results for a query job as a record stream
     *
     * This method assumes the job finished being processed
     * @returns {RecordStream} - Record stream, convertible to a CSV data stream
     */
    )
  }, {
    key: "result",
    value: (function () {
      var _result = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {
        var resultStream, resultDataStream, resultsPath, _context10, resPromise;
        return _regeneratorRuntime.wrap(function _callee7$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              resultStream = new Parsable();
              resultDataStream = resultStream.stream('csv');
              resultsPath = "/".concat(this.id, "/results");
            case 3:
              if (!(this.locator !== 'null')) {
                _context11.next = 10;
                break;
              }
              resPromise = this.createQueryRequest({
                method: 'GET',
                path: this.locator
                // resultsPath starts with '/'
                ? _concatInstanceProperty(_context10 = "".concat(resultsPath, "?locator=")).call(_context10, this.locator) : resultsPath,
                headers: {
                  Accept: 'text/csv'
                }
              });
              resPromise.stream().pipe(resultDataStream);
              _context11.next = 8;
              return resPromise;
            case 8:
              _context11.next = 3;
              break;
            case 10:
              return _context11.abrupt("return", resultStream);
            case 11:
            case "end":
              return _context11.stop();
          }
        }, _callee7, this);
      }));
      function result() {
        return _result.apply(this, arguments);
      }
      return result;
    }()
    /**
     * Deletes a query job.
     */
    )
  }, {
    key: "delete",
    value: (function () {
      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {
        return _regeneratorRuntime.wrap(function _callee8$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              return _context12.abrupt("return", this.createQueryRequest({
                method: 'DELETE',
                path: "/".concat(this.id)
              }));
            case 1:
            case "end":
              return _context12.stop();
          }
        }, _callee8, this);
      }));
      function _delete() {
        return _delete2.apply(this, arguments);
      }
      return _delete;
    }())
  }, {
    key: "createQueryRequest",
    value: function createQueryRequest(request) {
      var _this3 = this;
      var path = request.path,
        responseType = request.responseType;
      var basePath = "services/data/v".concat(this.connection.version, "/jobs/query");
      var url = new _URL(path ? basePath + path : basePath, this.connection.instanceUrl).toString();
      var httpApi = new BulkApiV2(this.connection, {
        responseType: responseType
      });
      httpApi.on('response', function (response) {
        _this3.locator = response.headers['sforce-locator'];
        _this3.logger.debug("sforce-locator: ".concat(_this3.locator));
      });
      return httpApi.request(_objectSpread(_objectSpread({}, request), {}, {
        url: url
      }));
    }
  }]);
}(EventEmitter);

/**
 * Class for Bulk API V2 Ingest Job
 */
export var IngestJobV2 = /*#__PURE__*/function (_EventEmitter2) {
  /**
   *
   */
  function IngestJobV2(conn, options) {
    var _this4;
    _classCallCheck(this, IngestJobV2);
    _this4 = _callSuper(this, IngestJobV2);
    _this4.connection = conn;
    _this4.logger = _this4.connection._logLevel ? getLogger('bulk2:IngestJobV2').createInstance(_this4.connection._logLevel) : getLogger('bulk2:IngestJobV2');
    _this4.pollingOptions = options.pollingOptions;
    if ('id' in options) {
      _this4._id = options.id;
    } else {
      _this4.bodyParams = options.bodyParams;
    }
    _this4.jobData = new JobDataV2({
      createRequest: function createRequest(request) {
        return _this4.createIngestRequest(request);
      },
      job: _this4
    });
    // default error handler to keep the latest error
    _this4.on('error', function (error) {
      return _this4.error = error;
    });
    return _this4;
  }

  /**
   * Get the query job ID.
   *
   * @returns {string} query job Id.
   */
  _inherits(IngestJobV2, _EventEmitter2);
  return _createClass(IngestJobV2, [{
    key: "id",
    get: function get() {
      return this.jobInfo ? this.jobInfo.id : this._id;
    }

    /**
     * Get the query job info.
     *
     * @returns {Promise<QueryJobInfoV2>} ingest job information.
     */
  }, {
    key: "getInfo",
    value: function getInfo() {
      if (this.jobInfo) {
        return this.jobInfo;
      }
      throw new Error('No internal job info. Make sure to call `await job.check`.');
    }

    /**
     * Create a job representing a bulk operation in the org
     *
     * @returns {Promise<QueryJobInfoV2>} job information.
     */
  }, {
    key: "open",
    value: (function () {
      var _open2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {
        return _regeneratorRuntime.wrap(function _callee9$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              if (this.bodyParams) {
                _context13.next = 2;
                break;
              }
              throw new Error('Missing required body params to open a new ingest job.');
            case 2:
              _context13.prev = 2;
              _context13.next = 5;
              return this.createIngestRequest({
                method: 'POST',
                body: _JSON$stringify(this.bodyParams),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 5:
              this.jobInfo = _context13.sent;
              this.logger.debug("Successfully created job ".concat(this.id));
              this.emit('open');
              _context13.next = 14;
              break;
            case 10:
              _context13.prev = 10;
              _context13.t0 = _context13["catch"](2);
              this.emit('error', _context13.t0);
              throw _context13.t0;
            case 14:
              return _context13.abrupt("return", this.jobInfo);
            case 15:
            case "end":
              return _context13.stop();
          }
        }, _callee9, this, [[2, 10]]);
      }));
      function open() {
        return _open2.apply(this, arguments);
      }
      return open;
    }()
    /** Upload data for a job in CSV format
     *
     *  @param input CSV as a string, or array of records or readable stream
     */
    )
  }, {
    key: "uploadData",
    value: (function () {
      var _uploadData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(input) {
        return _regeneratorRuntime.wrap(function _callee10$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              _context14.next = 2;
              return this.jobData.execute(input).result;
            case 2:
              this.logger.debug("Successfully uploaded data to job ".concat(this.id));
            case 3:
            case "end":
              return _context14.stop();
          }
        }, _callee10, this);
      }));
      function uploadData(_x4) {
        return _uploadData.apply(this, arguments);
      }
      return uploadData;
    }()
    /**
     * Close opened job
     *
     * This method will notify the org  that the upload of job data is complete and is ready for processing.
     */
    )
  }, {
    key: "close",
    value: (function () {
      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {
        var state;
        return _regeneratorRuntime.wrap(function _callee11$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              _context15.prev = 0;
              state = 'UploadComplete';
              _context15.next = 4;
              return this.createIngestRequest({
                method: 'PATCH',
                path: "/".concat(this.id),
                body: _JSON$stringify({
                  state: state
                }),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 4:
              this.jobInfo = _context15.sent;
              this.logger.debug("Successfully closed job ".concat(this.id));
              this.emit('close');
              _context15.next = 13;
              break;
            case 9:
              _context15.prev = 9;
              _context15.t0 = _context15["catch"](0);
              this.emit('error', _context15.t0);
              throw _context15.t0;
            case 13:
            case "end":
              return _context15.stop();
          }
        }, _callee11, this, [[0, 9]]);
      }));
      function close() {
        return _close.apply(this, arguments);
      }
      return close;
    }()
    /**
     * Set the status to abort
     */
    )
  }, {
    key: "abort",
    value: (function () {
      var _abort2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {
        var state;
        return _regeneratorRuntime.wrap(function _callee12$(_context16) {
          while (1) switch (_context16.prev = _context16.next) {
            case 0:
              _context16.prev = 0;
              state = 'Aborted';
              _context16.next = 4;
              return this.createIngestRequest({
                method: 'PATCH',
                path: "/".concat(this.id),
                body: _JSON$stringify({
                  state: state
                }),
                headers: {
                  'Content-Type': 'application/json; charset=utf-8'
                },
                responseType: 'application/json'
              });
            case 4:
              this.jobInfo = _context16.sent;
              this.logger.debug("Successfully aborted job ".concat(this.id));
              this.emit('aborted');
              _context16.next = 13;
              break;
            case 9:
              _context16.prev = 9;
              _context16.t0 = _context16["catch"](0);
              this.emit('error', _context16.t0);
              throw _context16.t0;
            case 13:
            case "end":
              return _context16.stop();
          }
        }, _callee12, this, [[0, 9]]);
      }));
      function abort() {
        return _abort2.apply(this, arguments);
      }
      return abort;
    }()
    /**
     * Poll for the state of the processing for the job.
     *
     * This method will only throw after a timeout. To capture a
     * job failure while polling you must set a listener for the
     * `failed` event before calling it:
     *
     * job.on('failed', (err) => console.error(err))
     * await job.poll()
     *
     * @param interval Polling interval in milliseconds
     * @param timeout Polling timeout in milliseconds
     * @returns {Promise<void>} A promise that resolves when the job finishes successfully
     */
    )
  }, {
    key: "poll",
    value: (function () {
      var _poll2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {
        var _context17, _context18;
        var interval,
          timeout,
          jobId,
          startTime,
          endTime,
          res,
          timeoutError,
          _args13 = arguments;
        return _regeneratorRuntime.wrap(function _callee13$(_context19) {
          while (1) switch (_context19.prev = _context19.next) {
            case 0:
              interval = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : this.pollingOptions.pollInterval;
              timeout = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : this.pollingOptions.pollTimeout;
              jobId = this.id;
              startTime = _Date$now();
              endTime = startTime + timeout;
              if (!(timeout === 0)) {
                _context19.next = 7;
                break;
              }
              throw new JobPollingTimeoutError("Skipping polling because of timeout = 0ms. Job Id = ".concat(jobId), jobId);
            case 7:
              this.logger.debug('Start polling for job status');
              this.logger.debug(_concatInstanceProperty(_context17 = "Polling options: timeout:".concat(timeout, "ms | interval: ")).call(_context17, interval, "ms."));
            case 9:
              if (!(endTime > _Date$now())) {
                _context19.next = 36;
                break;
              }
              _context19.prev = 10;
              _context19.next = 13;
              return this.check();
            case 13:
              res = _context19.sent;
              _context19.t0 = res.state;
              _context19.next = _context19.t0 === 'Open' ? 17 : _context19.t0 === 'Aborted' ? 18 : _context19.t0 === 'UploadComplete' ? 19 : _context19.t0 === 'InProgress' ? 19 : _context19.t0 === 'Failed' ? 23 : _context19.t0 === 'JobComplete' ? 25 : 28;
              break;
            case 17:
              throw new Error('Job is still open. Make sure close the job by `close` method on the job instance before polling.');
            case 18:
              throw new Error('Job has been aborted');
            case 19:
              this.emit('inProgress', res);
              _context19.next = 22;
              return delay(interval);
            case 22:
              return _context19.abrupt("break", 28);
            case 23:
              this.logger.debug(res);
              throw new Error("Ingest job failed to complete due to: ".concat(res.errorMessage));
            case 25:
              this.logger.debug("Job ".concat(this.id, " was successfully processed."));
              this.emit('jobComplete', res);
              return _context19.abrupt("return");
            case 28:
              _context19.next = 34;
              break;
            case 30:
              _context19.prev = 30;
              _context19.t1 = _context19["catch"](10);
              this.emit('error', _context19.t1);
              throw _context19.t1;
            case 34:
              _context19.next = 9;
              break;
            case 36:
              timeoutError = new JobPollingTimeoutError(_concatInstanceProperty(_context18 = "Polling timed out after ".concat(timeout, "ms. Job Id = ")).call(_context18, jobId), jobId);
              this.emit('error', timeoutError);
              throw timeoutError;
            case 39:
            case "end":
              return _context19.stop();
          }
        }, _callee13, this, [[10, 30]]);
      }));
      function poll() {
        return _poll2.apply(this, arguments);
      }
      return poll;
    }()
    /**
     * Check the latest batch status in server
     */
    )
  }, {
    key: "check",
    value: (function () {
      var _check2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {
        var jobInfo;
        return _regeneratorRuntime.wrap(function _callee14$(_context20) {
          while (1) switch (_context20.prev = _context20.next) {
            case 0:
              _context20.prev = 0;
              _context20.next = 3;
              return this.createIngestRequest({
                method: 'GET',
                path: "/".concat(this.id),
                responseType: 'application/json'
              });
            case 3:
              jobInfo = _context20.sent;
              this.jobInfo = jobInfo;
              return _context20.abrupt("return", jobInfo);
            case 8:
              _context20.prev = 8;
              _context20.t0 = _context20["catch"](0);
              this.emit('error', _context20.t0);
              throw _context20.t0;
            case 12:
            case "end":
              return _context20.stop();
          }
        }, _callee14, this, [[0, 8]]);
      }));
      function check() {
        return _check2.apply(this, arguments);
      }
      return check;
    }()
    /** Return all record results
     *
     * This method will return successful, failed and unprocessed records
     *
     * @returns Promise<IngestJobV2Results>
     */
    )
  }, {
    key: "getAllResults",
    value: (function () {
      var _getAllResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {
        var _yield$Promise$all, _yield$Promise$all2, successfulResults, failedResults, unprocessedRecords;
        return _regeneratorRuntime.wrap(function _callee15$(_context21) {
          while (1) switch (_context21.prev = _context21.next) {
            case 0:
              _context21.next = 2;
              return _Promise.all([this.getSuccessfulResults(), this.getFailedResults(), this.getUnprocessedRecords()]);
            case 2:
              _yield$Promise$all = _context21.sent;
              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);
              successfulResults = _yield$Promise$all2[0];
              failedResults = _yield$Promise$all2[1];
              unprocessedRecords = _yield$Promise$all2[2];
              return _context21.abrupt("return", {
                successfulResults: successfulResults,
                failedResults: failedResults,
                unprocessedRecords: unprocessedRecords
              });
            case 8:
            case "end":
              return _context21.stop();
          }
        }, _callee15, this);
      }));
      function getAllResults() {
        return _getAllResults.apply(this, arguments);
      }
      return getAllResults;
    }()
    /** Return successful results
     *
     * The order of records returned is not guaranteed to match the ordering of the uploaded data.
     *
     * @param {boolean} raw Get results as a CSV string
     * @returns Promise<IngestJobV2SuccessfulResults>
     */
    )
  }, {
    key: "getSuccessfulResults",
    value: function () {
      var _getSuccessfulResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(raw) {
        var reqOpts, results;
        return _regeneratorRuntime.wrap(function _callee16$(_context22) {
          while (1) switch (_context22.prev = _context22.next) {
            case 0:
              reqOpts = {
                method: 'GET',
                path: "/".concat(this.id, "/successfulResults")
              };
              if (!raw) {
                _context22.next = 3;
                break;
              }
              return _context22.abrupt("return", this.createIngestRequest(_objectSpread(_objectSpread({}, reqOpts), {}, {
                responseType: 'text/plain'
              })));
            case 3:
              if (!this.bulkJobSuccessfulResults) {
                _context22.next = 5;
                break;
              }
              return _context22.abrupt("return", this.bulkJobSuccessfulResults);
            case 5:
              _context22.next = 7;
              return this.createIngestRequest({
                method: 'GET',
                path: "/".concat(this.id, "/successfulResults"),
                responseType: 'text/csv'
              });
            case 7:
              results = _context22.sent;
              this.bulkJobSuccessfulResults = results !== null && results !== void 0 ? results : [];
              return _context22.abrupt("return", this.bulkJobSuccessfulResults);
            case 10:
            case "end":
              return _context22.stop();
          }
        }, _callee16, this);
      }));
      function getSuccessfulResults(_x5) {
        return _getSuccessfulResults.apply(this, arguments);
      }
      return getSuccessfulResults;
    }()
    /** Return failed results
     *
     * The order of records in the response is not guaranteed to match the ordering of records in the original job data.
     *
     * @param {boolean} raw Get results as a CSV string
     * @returns Promise<IngestJobV2SuccessfulResults>
     */
  }, {
    key: "getFailedResults",
    value: function () {
      var _getFailedResults = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(raw) {
        var reqOpts, results;
        return _regeneratorRuntime.wrap(function _callee17$(_context23) {
          while (1) switch (_context23.prev = _context23.next) {
            case 0:
              reqOpts = {
                method: 'GET',
                path: "/".concat(this.id, "/failedResults")
              };
              if (!raw) {
                _context23.next = 3;
                break;
              }
              return _context23.abrupt("return", this.createIngestRequest(_objectSpread(_objectSpread({}, reqOpts), {}, {
                responseType: 'text/plain'
              })));
            case 3:
              if (!this.bulkJobFailedResults) {
                _context23.next = 5;
                break;
              }
              return _context23.abrupt("return", this.bulkJobFailedResults);
            case 5:
              _context23.next = 7;
              return this.createIngestRequest(_objectSpread(_objectSpread({}, reqOpts), {}, {
                responseType: 'text/csv'
              }));
            case 7:
              results = _context23.sent;
              this.bulkJobFailedResults = results !== null && results !== void 0 ? results : [];
              return _context23.abrupt("return", this.bulkJobFailedResults);
            case 10:
            case "end":
              return _context23.stop();
          }
        }, _callee17, this);
      }));
      function getFailedResults(_x6) {
        return _getFailedResults.apply(this, arguments);
      }
      return getFailedResults;
    }()
    /** Return unprocessed results
     *
     * The unprocessed records endpoint returns records as a CSV.
     * If the request helper is able to parse it, you get the records
     * as an array of objects.
     * If unable to parse it (bad CSV), you get the raw response as a string.
     *
     * The order of records in the response is not guaranteed to match the ordering of records in the original job data.
     *
     * @param {boolean} raw Get results as a CSV string
     * @returns Promise<IngestJobV2UnprocessedRecords>
     */
  }, {
    key: "getUnprocessedRecords",
    value: function () {
      var _getUnprocessedRecords = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(raw) {
        var reqOpts, results;
        return _regeneratorRuntime.wrap(function _callee18$(_context24) {
          while (1) switch (_context24.prev = _context24.next) {
            case 0:
              reqOpts = {
                method: 'GET',
                path: "/".concat(this.id, "/unprocessedrecords")
              };
              if (!raw) {
                _context24.next = 3;
                break;
              }
              return _context24.abrupt("return", this.createIngestRequest(_objectSpread(_objectSpread({}, reqOpts), {}, {
                responseType: 'text/plain'
              })));
            case 3:
              if (!this.bulkJobUnprocessedRecords) {
                _context24.next = 5;
                break;
              }
              return _context24.abrupt("return", this.bulkJobUnprocessedRecords);
            case 5:
              _context24.next = 7;
              return this.createIngestRequest(_objectSpread(_objectSpread({}, reqOpts), {}, {
                responseType: 'text/csv'
              }));
            case 7:
              results = _context24.sent;
              this.bulkJobUnprocessedRecords = results !== null && results !== void 0 ? results : [];
              return _context24.abrupt("return", this.bulkJobUnprocessedRecords);
            case 10:
            case "end":
              return _context24.stop();
          }
        }, _callee18, this);
      }));
      function getUnprocessedRecords(_x7) {
        return _getUnprocessedRecords.apply(this, arguments);
      }
      return getUnprocessedRecords;
    }()
    /**
     * Deletes an ingest job.
     */
  }, {
    key: "delete",
    value: (function () {
      var _delete3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee19() {
        return _regeneratorRuntime.wrap(function _callee19$(_context25) {
          while (1) switch (_context25.prev = _context25.next) {
            case 0:
              return _context25.abrupt("return", this.createIngestRequest({
                method: 'DELETE',
                path: "/".concat(this.id)
              }));
            case 1:
            case "end":
              return _context25.stop();
          }
        }, _callee19, this);
      }));
      function _delete() {
        return _delete3.apply(this, arguments);
      }
      return _delete;
    }())
  }, {
    key: "createIngestRequest",
    value: function createIngestRequest(request) {
      var path = request.path,
        responseType = request.responseType;
      var basePath = "/services/data/v".concat(this.connection.version, "/jobs/ingest");
      var url = new _URL(path ? basePath + path : basePath, this.connection.instanceUrl).toString();
      return new BulkApiV2(this.connection, {
        responseType: responseType
      }).request(_objectSpread(_objectSpread({}, request), {}, {
        url: url
      }));
    }
  }]);
}(EventEmitter);
var JobDataV2 = /*#__PURE__*/function (_Writable) {
  /**
   *
   */
  function JobDataV2(options) {
    var _this5;
    _classCallCheck(this, JobDataV2);
    _this5 = _callSuper(this, JobDataV2, [{
      objectMode: true
    }]);
    var createRequest = options.createRequest;
    _this5.job = options.job;
    _this5.uploadStream = new Serializable();
    _this5.downloadStream = new Parsable();
    var converterOptions = {
      nullValue: '#N/A'
    };
    var uploadDataStream = _this5.uploadStream.stream('csv', converterOptions);
    var downloadDataStream = _this5.downloadStream.stream('csv', converterOptions);
    _this5.dataStream = concatStreamsAsDuplex(uploadDataStream, downloadDataStream);
    _this5.on('finish', function () {
      return _this5.uploadStream.end();
    });
    uploadDataStream.once('readable', function () {
      try {
        // pipe upload data to batch API request stream
        var req = createRequest({
          method: 'PUT',
          path: "/".concat(_this5.job.id, "/batches"),
          headers: {
            'Content-Type': 'text/csv'
          },
          responseType: 'application/json'
        });
        _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee20() {
          var res;
          return _regeneratorRuntime.wrap(function _callee20$(_context26) {
            while (1) switch (_context26.prev = _context26.next) {
              case 0:
                _context26.prev = 0;
                _context26.next = 3;
                return req;
              case 3:
                res = _context26.sent;
                _this5.emit('response', res);
                _context26.next = 10;
                break;
              case 7:
                _context26.prev = 7;
                _context26.t0 = _context26["catch"](0);
                _this5.emit('error', _context26.t0);
              case 10:
              case "end":
                return _context26.stop();
            }
          }, _callee20, null, [[0, 7]]);
        }))();
        uploadDataStream.pipe(req.stream());
      } catch (err) {
        _this5.emit('error', err);
      }
    });
    return _this5;
  }
  _inherits(JobDataV2, _Writable);
  return _createClass(JobDataV2, [{
    key: "_write",
    value: function _write(record_, enc, cb) {
      var Id = record_.Id,
        type = record_.type,
        attributes = record_.attributes,
        rrec = _objectWithoutProperties(record_, _excluded2);
      var record;
      switch (this.job.getInfo().operation) {
        case 'insert':
          record = rrec;
          break;
        case 'delete':
        case 'hardDelete':
          record = {
            Id: Id
          };
          break;
        default:
          record = _objectSpread({
            Id: Id
          }, rrec);
      }
      this.uploadStream.write(record, enc, cb);
    }

    /**
     * Returns duplex stream which accepts CSV data input and batch result output
     */
  }, {
    key: "stream",
    value: function stream() {
      return this.dataStream;
    }

    /**
     * Execute batch operation
     */
  }, {
    key: "execute",
    value: function execute(input) {
      var _this6 = this;
      if (this.result) {
        throw new Error('Data can only be uploaded to a job once.');
      }
      this.result = new _Promise(function (resolve, reject) {
        _this6.once('response', function () {
          return resolve();
        });
        _this6.once('error', reject);
      });
      if (is.nodeStream(input)) {
        // if input has stream.Readable interface
        input.pipe(this.dataStream);
      } else {
        var recordData = structuredClone(input);
        if (_Array$isArray(recordData)) {
          var _iterator = _createForOfIteratorHelper(recordData),
            _step;
          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var record = _step.value;
              for (var _i = 0, _Object$keys = _Object$keys2(record); _i < _Object$keys.length; _i++) {
                var key = _Object$keys[_i];
                if (typeof record[key] === 'boolean') {
                  record[key] = String(record[key]);
                }
              }
              this.write(record);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
          this.end();
        } else if (typeof recordData === 'string') {
          this.dataStream.write(recordData, 'utf8');
          this.dataStream.end();
        }
      }
      return this;
    }
  }]);
}(Writable);
function delay(ms) {
  return new _Promise(function (resolve) {
    return _setTimeout(resolve, ms);
  });
}

/*--------------------------------------------*/
/*
 * Register hook in connection instantiation for dynamically adding this API module features
 */
registerModule('bulk2', function (conn) {
  return new BulkV2(conn);
});
export default BulkV2;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJXcml0YWJsZSIsIlNlcmlhbGl6YWJsZSIsIlBhcnNhYmxlIiwiSHR0cEFwaSIsInJlZ2lzdGVyTW9kdWxlIiwiZ2V0TG9nZ2VyIiwiY29uY2F0U3RyZWFtc0FzRHVwbGV4IiwiaXMiLCJKb2JQb2xsaW5nVGltZW91dEVycm9yIiwiX0Vycm9yIiwibWVzc2FnZSIsImpvYklkIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJfY2FsbFN1cGVyIiwibmFtZSIsIl9pbmhlcml0cyIsIl9jcmVhdGVDbGFzcyIsIl93cmFwTmF0aXZlU3VwZXIiLCJFcnJvciIsIkJ1bGtBcGlWMiIsIl9IdHRwQXBpIiwiYXJndW1lbnRzIiwia2V5IiwidmFsdWUiLCJoYXNFcnJvckluUmVzcG9uc2VCb2R5IiwiYm9keSIsIl9BcnJheSRpc0FycmF5IiwiX3R5cGVvZiIsImlzU2Vzc2lvbkV4cGlyZWQiLCJyZXNwb25zZSIsIl9jb250ZXh0Iiwic3RhdHVzQ29kZSIsIl9pbmNsdWRlc0luc3RhbmNlUHJvcGVydHkiLCJjYWxsIiwicGFyc2VFcnJvciIsImVycm9yQ29kZSIsIkJ1bGtWMiIsImNvbm5lY3Rpb24iLCJfZGVmaW5lUHJvcGVydHkiLCJsb2dnZXIiLCJfbG9nTGV2ZWwiLCJjcmVhdGVJbnN0YW5jZSIsImNyZWF0ZUpvYiIsIm9wdGlvbnMiLCJJbmdlc3RKb2JWMiIsImJvZHlQYXJhbXMiLCJwb2xsaW5nT3B0aW9ucyIsImpvYiIsInR5cGUiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpZCIsIlF1ZXJ5Sm9iVjIiLCJfbG9hZEFuZFdhaXRGb3JSZXN1bHRzIiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJwb2xsSW50ZXJ2YWwiLCJwb2xsVGltZW91dCIsImlucHV0IiwiY3JlYXRlSm9iT3B0cyIsImVyciIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0MiIsInByZXYiLCJuZXh0IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiX2V4Y2x1ZGVkIiwib3BlbiIsInVwbG9hZERhdGEiLCJjbG9zZSIsInBvbGwiLCJnZXRBbGxSZXN1bHRzIiwiYWJydXB0Iiwic2VudCIsInQwIiwiZXJyb3IiLCJjb25jYXQiLCJkZWxldGUiLCJjYXRjaCIsImlnbm9yZWQiLCJzdG9wIiwibG9hZEFuZFdhaXRGb3JSZXN1bHRzIiwiX3giLCJhcHBseSIsIl9xdWVyeSIsIl9jYWxsZWUyIiwic29xbCIsInF1ZXJ5Sm9iIiwicmVjb3JkU3RyZWFtIiwiZGF0YVN0cmVhbSIsInF1ZXJ5UmVjb3Jkc1N0cmVhbSIsIl9jYWxsZWUyJCIsIl9jb250ZXh0MyIsInF1ZXJ5Iiwib3BlcmF0aW9uIiwic2NhbkFsbCIsImNvbHVtbkRlbGltaXRlciIsImxpbmVFbmRpbmciLCJzdHJlYW0iLCJyZXN1bHQiLCJ0aGVuIiwicyIsInBpcGUiLCJfeDIiLCJfeDMiLCJfRXZlbnRFbWl0dGVyIiwiY29ubiIsIl90aGlzMiIsIl9pZCIsIm9uIiwiZ2V0Iiwiam9iSW5mbyIsImdldEluZm8iLCJfb3BlbiIsIl9jYWxsZWUzIiwiX2NhbGxlZTMkIiwiX2NvbnRleHQ0IiwiY3JlYXRlUXVlcnlSZXF1ZXN0IiwibWV0aG9kIiwiX0pTT04kc3RyaW5naWZ5IiwiaGVhZGVycyIsInJlc3BvbnNlVHlwZSIsImRlYnVnIiwiZW1pdCIsIl9hYm9ydCIsIl9jYWxsZWU0Iiwic3RhdGUiLCJfY2FsbGVlNCQiLCJfY29udGV4dDUiLCJwYXRoIiwiYWJvcnQiLCJfcG9sbCIsIl9jYWxsZWU1IiwiX2NvbnRleHQ2IiwiX2NvbnRleHQ3IiwiaW50ZXJ2YWwiLCJ0aW1lb3V0Iiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInJlcyIsInRpbWVvdXRFcnJvciIsIl9hcmdzNSIsIl9jYWxsZWU1JCIsIl9jb250ZXh0OCIsIl9EYXRlJG5vdyIsIl9jb25jYXRJbnN0YW5jZVByb3BlcnR5IiwiY2hlY2siLCJkZWxheSIsInQxIiwiX2NoZWNrIiwiX2NhbGxlZTYiLCJfY2FsbGVlNiQiLCJfY29udGV4dDkiLCJfcmVzdWx0IiwiX2NhbGxlZTciLCJyZXN1bHRTdHJlYW0iLCJyZXN1bHREYXRhU3RyZWFtIiwicmVzdWx0c1BhdGgiLCJfY29udGV4dDEwIiwicmVzUHJvbWlzZSIsIl9jYWxsZWU3JCIsIl9jb250ZXh0MTEiLCJsb2NhdG9yIiwiQWNjZXB0IiwiX2RlbGV0ZTIiLCJfY2FsbGVlOCIsIl9jYWxsZWU4JCIsIl9jb250ZXh0MTIiLCJfZGVsZXRlIiwicmVxdWVzdCIsIl90aGlzMyIsImJhc2VQYXRoIiwidmVyc2lvbiIsInVybCIsIl9VUkwiLCJpbnN0YW5jZVVybCIsInRvU3RyaW5nIiwiaHR0cEFwaSIsIl9vYmplY3RTcHJlYWQiLCJfRXZlbnRFbWl0dGVyMiIsIl90aGlzNCIsImpvYkRhdGEiLCJKb2JEYXRhVjIiLCJjcmVhdGVSZXF1ZXN0IiwiY3JlYXRlSW5nZXN0UmVxdWVzdCIsIl9vcGVuMiIsIl9jYWxsZWU5IiwiX2NhbGxlZTkkIiwiX2NvbnRleHQxMyIsIl91cGxvYWREYXRhIiwiX2NhbGxlZTEwIiwiX2NhbGxlZTEwJCIsIl9jb250ZXh0MTQiLCJleGVjdXRlIiwiX3g0IiwiX2Nsb3NlIiwiX2NhbGxlZTExIiwiX2NhbGxlZTExJCIsIl9jb250ZXh0MTUiLCJfYWJvcnQyIiwiX2NhbGxlZTEyIiwiX2NhbGxlZTEyJCIsIl9jb250ZXh0MTYiLCJfcG9sbDIiLCJfY2FsbGVlMTMiLCJfY29udGV4dDE3IiwiX2NvbnRleHQxOCIsIl9hcmdzMTMiLCJfY2FsbGVlMTMkIiwiX2NvbnRleHQxOSIsImVycm9yTWVzc2FnZSIsIl9jaGVjazIiLCJfY2FsbGVlMTQiLCJfY2FsbGVlMTQkIiwiX2NvbnRleHQyMCIsIl9nZXRBbGxSZXN1bHRzIiwiX2NhbGxlZTE1IiwiX3lpZWxkJFByb21pc2UkYWxsIiwiX3lpZWxkJFByb21pc2UkYWxsMiIsInN1Y2Nlc3NmdWxSZXN1bHRzIiwiZmFpbGVkUmVzdWx0cyIsInVucHJvY2Vzc2VkUmVjb3JkcyIsIl9jYWxsZWUxNSQiLCJfY29udGV4dDIxIiwiX1Byb21pc2UiLCJhbGwiLCJnZXRTdWNjZXNzZnVsUmVzdWx0cyIsImdldEZhaWxlZFJlc3VsdHMiLCJnZXRVbnByb2Nlc3NlZFJlY29yZHMiLCJfc2xpY2VkVG9BcnJheSIsIl9nZXRTdWNjZXNzZnVsUmVzdWx0cyIsIl9jYWxsZWUxNiIsInJhdyIsInJlcU9wdHMiLCJyZXN1bHRzIiwiX2NhbGxlZTE2JCIsIl9jb250ZXh0MjIiLCJidWxrSm9iU3VjY2Vzc2Z1bFJlc3VsdHMiLCJfeDUiLCJfZ2V0RmFpbGVkUmVzdWx0cyIsIl9jYWxsZWUxNyIsIl9jYWxsZWUxNyQiLCJfY29udGV4dDIzIiwiYnVsa0pvYkZhaWxlZFJlc3VsdHMiLCJfeDYiLCJfZ2V0VW5wcm9jZXNzZWRSZWNvcmRzIiwiX2NhbGxlZTE4IiwiX2NhbGxlZTE4JCIsIl9jb250ZXh0MjQiLCJidWxrSm9iVW5wcm9jZXNzZWRSZWNvcmRzIiwiX3g3IiwiX2RlbGV0ZTMiLCJfY2FsbGVlMTkiLCJfY2FsbGVlMTkkIiwiX2NvbnRleHQyNSIsIl9Xcml0YWJsZSIsIl90aGlzNSIsIm9iamVjdE1vZGUiLCJ1cGxvYWRTdHJlYW0iLCJkb3dubG9hZFN0cmVhbSIsImNvbnZlcnRlck9wdGlvbnMiLCJudWxsVmFsdWUiLCJ1cGxvYWREYXRhU3RyZWFtIiwiZG93bmxvYWREYXRhU3RyZWFtIiwiZW5kIiwib25jZSIsInJlcSIsIl9jYWxsZWUyMCIsIl9jYWxsZWUyMCQiLCJfY29udGV4dDI2IiwiX3dyaXRlIiwicmVjb3JkXyIsImVuYyIsImNiIiwiSWQiLCJhdHRyaWJ1dGVzIiwicnJlYyIsIl9leGNsdWRlZDIiLCJyZWNvcmQiLCJ3cml0ZSIsIl90aGlzNiIsInJlc29sdmUiLCJyZWplY3QiLCJub2RlU3RyZWFtIiwicmVjb3JkRGF0YSIsInN0cnVjdHVyZWRDbG9uZSIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwiX3N0ZXAiLCJuIiwiZG9uZSIsIl9pIiwiX09iamVjdCRrZXlzIiwiX09iamVjdCRrZXlzMiIsIlN0cmluZyIsImUiLCJmIiwibXMiLCJfc2V0VGltZW91dCJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcGkvYnVsazIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7IER1cGxleCwgUmVhZGFibGUsIFdyaXRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCBDb25uZWN0aW9uIGZyb20gJy4uL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU2VyaWFsaXphYmxlLCBQYXJzYWJsZSB9IGZyb20gJy4uL3JlY29yZC1zdHJlYW0nO1xuaW1wb3J0IEh0dHBBcGkgZnJvbSAnLi4vaHR0cC1hcGknO1xuaW1wb3J0IHsgU3RyZWFtUHJvbWlzZSB9IGZyb20gJy4uL3V0aWwvcHJvbWlzZSc7XG5pbXBvcnQgeyByZWdpc3Rlck1vZHVsZSB9IGZyb20gJy4uL2pzZm9yY2UnO1xuaW1wb3J0IHsgQnVsa1JlcXVlc3QgfSBmcm9tICcuL2J1bGsnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyLCBMb2dnZXIgfSBmcm9tICcuLi91dGlsL2xvZ2dlcic7XG5pbXBvcnQgeyBjb25jYXRTdHJlYW1zQXNEdXBsZXggfSBmcm9tICcuLi91dGlsL3N0cmVhbSc7XG5pbXBvcnQgeyBIdHRwUmVzcG9uc2UsIFJlY29yZCwgU2NoZW1hIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IGlzIGZyb20gJ0BzaW5kcmVzb3JodXMvaXMnO1xuXG5leHBvcnQgdHlwZSBJbmdlc3RPcGVyYXRpb24gPVxuICB8ICdpbnNlcnQnXG4gIHwgJ3VwZGF0ZSdcbiAgfCAndXBzZXJ0J1xuICB8ICdkZWxldGUnXG4gIHwgJ2hhcmREZWxldGUnO1xuXG50eXBlIEJhc2VKb2JJbmZvID0ge1xuICBpZDogc3RyaW5nO1xuICBvYmplY3Q6IHN0cmluZztcbiAgY3JlYXRlZEJ5SWQ6IHN0cmluZztcbiAgY3JlYXRlZERhdGU6IHN0cmluZztcbiAgc3lzdGVtTW9kc3RhbXA6IHN0cmluZztcbiAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICBsaW5lRW5kaW5nOiAnTEYnIHwgJ0NSTEYnO1xuICBjb2x1bW5EZWxpbWl0ZXI6XG4gICAgfCAnQkFDS1FVT1RFJ1xuICAgIHwgJ0NBUkVUJ1xuICAgIHwgJ0NPTU1BJ1xuICAgIHwgJ1BJUEUnXG4gICAgfCAnU0VNSUNPTE9OJ1xuICAgIHwgJ1RBQic7XG4gIGNvbmN1cnJlbmN5TW9kZTogJ1BhcmFsbGVsJztcbiAgY29udGVudFR5cGU6ICdDU1YnO1xuICBudW1iZXJSZWNvcmRzUHJvY2Vzc2VkOiBudW1iZXI7XG4gIHJldHJpZXM6IG51bWJlcjtcbiAgdG90YWxQcm9jZXNzaW5nVGltZTogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgUXVlcnlKb2JJbmZvVjIgPSBCYXNlSm9iSW5mbyAmIHtcbiAgb3BlcmF0aW9uOiAncXVlcnknIHwgJ3F1ZXJ5QWxsJztcbiAgc3RhdGU6ICdVcGxvYWRDb21wbGV0ZScgfCAnSW5Qcm9ncmVzcycgfCAnQWJvcnRlZCcgfCAnSm9iQ29tcGxldGUnIHwgJ0ZhaWxlZCc7XG4gIGpvYlR5cGU6ICdWMlF1ZXJ5JztcbiAgaXNQa0NodW5raW5nU3VwcG9ydGVkOiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgSm9iSW5mb1YyID0gQmFzZUpvYkluZm8gJiB7XG4gIGFwZXhQcm9jZXNzaW5nVGltZTogbnVtYmVyO1xuICBhcGlBY3RpdmVQcm9jZXNzaW5nVGltZTogbnVtYmVyO1xuICBhc3NpZ25tZW50UnVsZUlkPzogc3RyaW5nO1xuICBjb250ZW50VXJsOiBzdHJpbmc7XG4gIGVycm9yTWVzc2FnZT86IHN0cmluZztcbiAgZXh0ZXJuYWxJZEZpZWxkTmFtZT86IHN0cmluZztcbiAgam9iVHlwZTogJ0JpZ09iamVjdEluZ2VzdCcgfCAnQ2xhc3NpYycgfCAnVjJJbmdlc3QnO1xuICBvcGVyYXRpb246IEluZ2VzdE9wZXJhdGlvbjtcbiAgc3RhdGU6XG4gICAgfCAnT3BlbidcbiAgICB8ICdVcGxvYWRDb21wbGV0ZSdcbiAgICB8ICdJblByb2dyZXNzJ1xuICAgIHwgJ0pvYkNvbXBsZXRlJ1xuICAgIHwgJ0Fib3J0ZWQnXG4gICAgfCAnRmFpbGVkJztcbiAgbnVtYmVyUmVjb3Jkc0ZhaWxlZDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgSW5nZXN0Sm9iVjJTdWNjZXNzZnVsUmVzdWx0czxTIGV4dGVuZHMgU2NoZW1hPiA9IEFycmF5PFxuICB7XG4gICAgc2ZfX0NyZWF0ZWQ6ICd0cnVlJyB8ICdmYWxzZSc7XG4gICAgc2ZfX0lkOiBzdHJpbmc7XG4gIH0gJiBTXG4+O1xuXG5leHBvcnQgdHlwZSBJbmdlc3RKb2JWMkZhaWxlZFJlc3VsdHM8UyBleHRlbmRzIFNjaGVtYT4gPSBBcnJheTxcbiAge1xuICAgIHNmX19FcnJvcjogc3RyaW5nO1xuICAgIHNmX19JZDogc3RyaW5nO1xuICB9ICYgU1xuPjtcblxuZXhwb3J0IHR5cGUgSW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM8UyBleHRlbmRzIFNjaGVtYT4gPSBTW10gfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIEluZ2VzdEpvYlYyUmVzdWx0czxTIGV4dGVuZHMgU2NoZW1hPiA9IHtcbiAgc3VjY2Vzc2Z1bFJlc3VsdHM6IEluZ2VzdEpvYlYyU3VjY2Vzc2Z1bFJlc3VsdHM8Uz47XG4gIGZhaWxlZFJlc3VsdHM6IEluZ2VzdEpvYlYyRmFpbGVkUmVzdWx0czxTPjtcbiAgdW5wcm9jZXNzZWRSZWNvcmRzOiBJbmdlc3RKb2JWMlVucHJvY2Vzc2VkUmVjb3JkczxTPjtcbn07XG5cbnR5cGUgTmV3SW5nZXN0Sm9iT3B0aW9ucyA9IFJlcXVpcmVkPFBpY2s8Sm9iSW5mb1YyLCAnb2JqZWN0JyB8ICdvcGVyYXRpb24nPj4gJlxuICBQYXJ0aWFsPFxuICAgIFBpY2s8XG4gICAgICBKb2JJbmZvVjIsXG4gICAgICB8ICdhc3NpZ25tZW50UnVsZUlkJ1xuICAgICAgfCAnY29sdW1uRGVsaW1pdGVyJ1xuICAgICAgfCAnZXh0ZXJuYWxJZEZpZWxkTmFtZSdcbiAgICAgIHwgJ2xpbmVFbmRpbmcnXG4gICAgICB8ICdjb250ZW50VHlwZSdcbiAgICA+XG4gID47XG5cbnR5cGUgTmV3UXVlcnlKb2JPcHRpb25zID0ge1xuICBxdWVyeTogc3RyaW5nO1xuICBvcGVyYXRpb246IFF1ZXJ5Sm9iSW5mb1YyWydvcGVyYXRpb24nXTtcbn0gJiBQYXJ0aWFsPFBpY2s8UXVlcnlKb2JJbmZvVjIsICdjb2x1bW5EZWxpbWl0ZXInIHwgJ2xpbmVFbmRpbmcnPj47XG5cbnR5cGUgQ3JlYXRlSW5nZXN0Sm9iVjJPcHRpb25zID0ge1xuICBib2R5UGFyYW1zOiBOZXdJbmdlc3RKb2JPcHRpb25zO1xuICBwb2xsaW5nT3B0aW9uczogQnVsa1YyUG9sbGluZ09wdGlvbnM7XG59O1xuXG50eXBlIEV4aXN0aW5nSW5nZXN0Sm9iT3B0aW9ucyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgcG9sbGluZ09wdGlvbnM6IEJ1bGtWMlBvbGxpbmdPcHRpb25zO1xufTtcblxudHlwZSBDcmVhdGVJbmdlc3RKb2JWMlJlcXVlc3QgPSA8VD4ocmVxdWVzdDogQnVsa1JlcXVlc3QpID0+IFN0cmVhbVByb21pc2U8VD47XG5cbnR5cGUgQ3JlYXRlSm9iRGF0YVYyT3B0aW9uczxTIGV4dGVuZHMgU2NoZW1hPiA9IHtcbiAgam9iOiBJbmdlc3RKb2JWMjxTPjtcbiAgY3JlYXRlUmVxdWVzdDogQ3JlYXRlSW5nZXN0Sm9iVjJSZXF1ZXN0O1xufTtcblxudHlwZSBDcmVhdGVRdWVyeUpvYlYyT3B0aW9ucyA9IHtcbiAgYm9keVBhcmFtczogTmV3UXVlcnlKb2JPcHRpb25zO1xuICBwb2xsaW5nT3B0aW9uczogQnVsa1YyUG9sbGluZ09wdGlvbnM7XG59O1xuXG50eXBlIEV4aXN0aW5nUXVlcnlKb2JWMk9wdGlvbnMgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHBvbGxpbmdPcHRpb25zOiBCdWxrVjJQb2xsaW5nT3B0aW9ucztcbn07XG5cbnR5cGUgQnVsa1YyUG9sbGluZ09wdGlvbnMgPSB7XG4gIHBvbGxJbnRlcnZhbDogbnVtYmVyO1xuICBwb2xsVGltZW91dDogbnVtYmVyO1xufTtcblxuY2xhc3MgSm9iUG9sbGluZ1RpbWVvdXRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgam9iSWQ6IHN0cmluZztcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgam9iSWQ6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdKb2JQb2xsaW5nVGltZW91dCc7XG4gICAgdGhpcy5qb2JJZCA9IGpvYklkO1xuICB9XG59XG5cbmNsYXNzIEJ1bGtBcGlWMjxTIGV4dGVuZHMgU2NoZW1hPiBleHRlbmRzIEh0dHBBcGk8Uz4ge1xuICBoYXNFcnJvckluUmVzcG9uc2VCb2R5KGJvZHk6IGFueSkge1xuICAgIHJldHVybiAoXG4gICAgICBBcnJheS5pc0FycmF5KGJvZHkpICYmXG4gICAgICB0eXBlb2YgYm9keVswXSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICdlcnJvckNvZGUnIGluIGJvZHlbMF1cbiAgICApO1xuICB9XG5cbiAgaXNTZXNzaW9uRXhwaXJlZChyZXNwb25zZTogSHR0cFJlc3BvbnNlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMSAmJlxuICAgICAgcmVzcG9uc2UuYm9keS5pbmNsdWRlcygnSU5WQUxJRF9TRVNTSU9OX0lEJylcbiAgICApO1xuICB9XG5cbiAgcGFyc2VFcnJvcihib2R5OiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3JDb2RlOiBib2R5WzBdLmVycm9yQ29kZSxcbiAgICAgIG1lc3NhZ2U6IGJvZHlbMF0ubWVzc2FnZSxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCdWxrVjI8UyBleHRlbmRzIFNjaGVtYT4ge1xuICBwcml2YXRlIGNvbm5lY3Rpb246IENvbm5lY3Rpb248Uz47XG4gIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgLyoqXG4gICAqIFBvbGxpbmcgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzXG4gICAqXG4gICAqIERlZmF1bHQ6IDEwMDAgKDEgc2Vjb25kKVxuICAgKi9cbiAgcHVibGljIHBvbGxJbnRlcnZhbCA9IDEwMDA7XG5cbiAgLyoqXG4gICAqIFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICpcbiAgICogRGVmYXVsdDogMzAwMDAgKDMwIHNlY29uZHMpXG4gICAqL1xuICBwdWJsaWMgcG9sbFRpbWVvdXQgPSAzMDAwMDtcblxuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uOiBDb25uZWN0aW9uPFM+KSB7XG4gICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICB0aGlzLmxvZ2dlciA9IHRoaXMuY29ubmVjdGlvbi5fbG9nTGV2ZWxcbiAgICAgID8gZ2V0TG9nZ2VyKCdidWxrMicpLmNyZWF0ZUluc3RhbmNlKHRoaXMuY29ubmVjdGlvbi5fbG9nTGV2ZWwpXG4gICAgICA6IGdldExvZ2dlcignYnVsazInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYW4gaW5nZXN0IGpvYiBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbXMge05ld0luZ2VzdEpvYk9wdGlvbnN9IG9wdGlvbnMgb2JqZWN0XG4gICAqIEByZXR1cm5zIHtJbmdlc3RKb2JWMn0gQW4gaW5nZXN0IGpvYiBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBVcHNlcnQgcmVjb3JkcyB0byB0aGUgQWNjb3VudCBvYmplY3QuXG4gICAqXG4gICAqIGNvbnN0IGpvYiA9IGNvbm5lY3Rpb24uYnVsazIuY3JlYXRlSm9iKHtcbiAgICogICBvcGVyYXRpb246ICdpbnNlcnQnXG4gICAqICAgb2JqZWN0OiAnQWNjb3VudCcsXG4gICAqIH0pO1xuICAgKlxuICAgKiAvLyBjcmVhdGUgdGhlIGpvYiBpbiB0aGUgb3JnXG4gICAqIGF3YWl0IGpvYi5vcGVuKClcbiAgICpcbiAgICogLy8gdXBsb2FkIGRhdGFcbiAgICogYXdhaXQgam9iLnVwbG9hZERhdGEoY3N2RmlsZSlcbiAgICpcbiAgICogLy8gZmluaXNoZWQgdXBsb2FkaW5nIGRhdGEsIG1hcmsgaXQgYXMgcmVhZHkgZm9yIHByb2Nlc3NpbmdcbiAgICogYXdhaXQgam9iLmNsb3NlKClcbiAgICovXG4gIHB1YmxpYyBjcmVhdGVKb2Iob3B0aW9uczogTmV3SW5nZXN0Sm9iT3B0aW9ucyk6IEluZ2VzdEpvYlYyPFM+IHtcbiAgICByZXR1cm4gbmV3IEluZ2VzdEpvYlYyKHRoaXMuY29ubmVjdGlvbiwge1xuICAgICAgYm9keVBhcmFtczogb3B0aW9ucyxcbiAgICAgIHBvbGxpbmdPcHRpb25zOiB0aGlzLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBpbmdlc3Qgb3IgcXVlcnkgam9iIGluc3RhbmNlIHNwZWNpZmllZCBieSBhIGdpdmVuIGpvYiBJRFxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdCB3aXRoIGEgam9iIElEXG4gICAqIEByZXR1cm5zIEluZ2VzdEpvYlYyIEFuIGluZ2VzdCBqb2JcbiAgICovXG4gIHB1YmxpYyBqb2IoXG4gICAgdHlwZTogJ3F1ZXJ5JyxcbiAgICBvcHRpb25zOiBQaWNrPEV4aXN0aW5nUXVlcnlKb2JWMk9wdGlvbnMsICdpZCc+LFxuICApOiBRdWVyeUpvYlYyPFM+O1xuICBwdWJsaWMgam9iKFxuICAgIHR5cGU6ICdpbmdlc3QnLFxuICAgIG9wdGlvbnM6IFBpY2s8RXhpc3RpbmdJbmdlc3RKb2JPcHRpb25zLCAnaWQnPixcbiAgKTogSW5nZXN0Sm9iVjI8Uz47XG4gIHB1YmxpYyBqb2IoXG4gICAgdHlwZTogJ2luZ2VzdCcgfCAncXVlcnknID0gJ2luZ2VzdCcsXG4gICAgb3B0aW9uczogRXhpc3RpbmdJbmdlc3RKb2JPcHRpb25zIHwgRXhpc3RpbmdRdWVyeUpvYlYyT3B0aW9ucyxcbiAgKTogSW5nZXN0Sm9iVjI8Uz4gfCBRdWVyeUpvYlYyPFM+IHtcbiAgICBpZiAodHlwZSA9PT0gJ2luZ2VzdCcpIHtcbiAgICAgIHJldHVybiBuZXcgSW5nZXN0Sm9iVjIodGhpcy5jb25uZWN0aW9uLCB7XG4gICAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgICBwb2xsaW5nT3B0aW9uczogdGhpcyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFF1ZXJ5Sm9iVjIodGhpcy5jb25uZWN0aW9uLCB7XG4gICAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgICBwb2xsaW5nT3B0aW9uczogdGhpcyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUsIHVwbG9hZCwgYW5kIHN0YXJ0IGJ1bGtsb2FkIGpvYlxuICAgKi9cbiAgYXN5bmMgbG9hZEFuZFdhaXRGb3JSZXN1bHRzKFxuICAgIG9wdGlvbnM6IE5ld0luZ2VzdEpvYk9wdGlvbnMgJlxuICAgICAgUGFydGlhbDxCdWxrVjJQb2xsaW5nT3B0aW9ucz4gJiB7XG4gICAgICAgIGlucHV0OiBSZWNvcmRbXSB8IFJlYWRhYmxlIHwgc3RyaW5nO1xuICAgICAgfSxcbiAgKTogUHJvbWlzZTxJbmdlc3RKb2JWMlJlc3VsdHM8Uz4+IHtcbiAgICBpZiAoIW9wdGlvbnMucG9sbFRpbWVvdXQpIG9wdGlvbnMucG9sbFRpbWVvdXQgPSB0aGlzLnBvbGxUaW1lb3V0O1xuICAgIGlmICghb3B0aW9ucy5wb2xsSW50ZXJ2YWwpIG9wdGlvbnMucG9sbEludGVydmFsID0gdGhpcy5wb2xsSW50ZXJ2YWw7XG5cbiAgICBjb25zdCB7IHBvbGxJbnRlcnZhbCwgcG9sbFRpbWVvdXQsIGlucHV0LCAuLi5jcmVhdGVKb2JPcHRzIH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3Qgam9iID0gdGhpcy5jcmVhdGVKb2IoY3JlYXRlSm9iT3B0cyk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGpvYi5vcGVuKCk7XG4gICAgICBhd2FpdCBqb2IudXBsb2FkRGF0YShpbnB1dCk7XG4gICAgICBhd2FpdCBqb2IuY2xvc2UoKTtcbiAgICAgIGF3YWl0IGpvYi5wb2xsKHBvbGxJbnRlcnZhbCwgcG9sbFRpbWVvdXQpO1xuICAgICAgcmV0dXJuIGF3YWl0IGpvYi5nZXRBbGxSZXN1bHRzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVyciA9IGVycm9yIGFzIEVycm9yO1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYGJ1bGsgbG9hZCBmYWlsZWQgZHVlIHRvOiAke2Vyci5tZXNzYWdlfWApO1xuXG4gICAgICBpZiAoZXJyLm5hbWUgIT09ICdKb2JQb2xsaW5nVGltZW91dEVycm9yJykge1xuICAgICAgICAvLyBmaXJlcyBvZmYgb25lIGxhc3QgYXR0ZW1wdCB0byBjbGVhbiB1cCBhbmQgaWdub3JlcyB0aGUgcmVzdWx0IHwgZXJyb3JcbiAgICAgICAgam9iLmRlbGV0ZSgpLmNhdGNoKChpZ25vcmVkKSA9PiBpZ25vcmVkKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBidWxrIHF1ZXJ5IGFuZCBnZXQgYSByZWNvcmQgc3RyZWFtLlxuICAgKlxuICAgKiBEZWZhdWx0IHRpbWVvdXQ6IDEwMDAwbXNcbiAgICpcbiAgICogQHBhcmFtIHNvcWwgU09RTCBxdWVyeVxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKlxuICAgKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtfSAtIFJlY29yZCBzdHJlYW0sIGNvbnZlcnRpYmxlIHRvIGEgQ1NWIGRhdGEgc3RyZWFtXG4gICAqL1xuICBhc3luYyBxdWVyeShcbiAgICBzb3FsOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8QnVsa1YyUG9sbGluZ09wdGlvbnM+ICYge1xuICAgICAgc2NhbkFsbD86IGJvb2xlYW47XG4gICAgICBjb2x1bW5EZWxpbWl0ZXI/OiBRdWVyeUpvYkluZm9WMlsnY29sdW1uRGVsaW1pdGVyJ107XG4gICAgICBsaW5lRW5kaW5nPzogUXVlcnlKb2JJbmZvVjJbJ2xpbmVFbmRpbmcnXTtcbiAgICB9LFxuICApOiBQcm9taXNlPFBhcnNhYmxlPFJlY29yZD4+IHtcbiAgICBjb25zdCBxdWVyeUpvYiA9IG5ldyBRdWVyeUpvYlYyKHRoaXMuY29ubmVjdGlvbiwge1xuICAgICAgYm9keVBhcmFtczoge1xuICAgICAgICBxdWVyeTogc29xbCxcbiAgICAgICAgb3BlcmF0aW9uOiBvcHRpb25zPy5zY2FuQWxsID8gJ3F1ZXJ5QWxsJyA6ICdxdWVyeScsXG4gICAgICAgIGNvbHVtbkRlbGltaXRlcjogb3B0aW9ucz8uY29sdW1uRGVsaW1pdGVyLFxuICAgICAgICBsaW5lRW5kaW5nOiBvcHRpb25zPy5saW5lRW5kaW5nLFxuICAgICAgfSxcbiAgICAgIHBvbGxpbmdPcHRpb25zOiB0aGlzLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVjb3JkU3RyZWFtID0gbmV3IFBhcnNhYmxlKCk7XG4gICAgY29uc3QgZGF0YVN0cmVhbSA9IHJlY29yZFN0cmVhbS5zdHJlYW0oJ2NzdicpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHF1ZXJ5Sm9iLm9wZW4oKTtcbiAgICAgIGF3YWl0IHF1ZXJ5Sm9iLnBvbGwob3B0aW9ucz8ucG9sbEludGVydmFsLCBvcHRpb25zPy5wb2xsVGltZW91dCk7XG5cbiAgICAgIGNvbnN0IHF1ZXJ5UmVjb3Jkc1N0cmVhbSA9IGF3YWl0IHF1ZXJ5Sm9iXG4gICAgICAgIC5yZXN1bHQoKVxuICAgICAgICAudGhlbigocykgPT4gcy5zdHJlYW0oKSk7XG4gICAgICBxdWVyeVJlY29yZHNTdHJlYW0ucGlwZShkYXRhU3RyZWFtKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyID0gZXJyb3IgYXMgRXJyb3I7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihgYnVsayBxdWVyeSBmYWlsZWQgZHVlIHRvOiAke2Vyci5tZXNzYWdlfWApO1xuXG4gICAgICBpZiAoZXJyLm5hbWUgIT09ICdKb2JQb2xsaW5nVGltZW91dEVycm9yJykge1xuICAgICAgICAvLyBmaXJlcyBvZmYgb25lIGxhc3QgYXR0ZW1wdCB0byBjbGVhbiB1cCBhbmQgaWdub3JlcyB0aGUgcmVzdWx0IHwgZXJyb3JcbiAgICAgICAgcXVlcnlKb2IuZGVsZXRlKCkuY2F0Y2goKGlnbm9yZWQpID0+IGlnbm9yZWQpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIHJldHVybiByZWNvcmRTdHJlYW07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFF1ZXJ5Sm9iVjI8UyBleHRlbmRzIFNjaGVtYT4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbm5lY3Rpb246IENvbm5lY3Rpb248Uz47XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgX2lkPzogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IGJvZHlQYXJhbXM/OiBOZXdRdWVyeUpvYk9wdGlvbnM7XG4gIHByaXZhdGUgcmVhZG9ubHkgcG9sbGluZ09wdGlvbnM6IEJ1bGtWMlBvbGxpbmdPcHRpb25zO1xuICBwcml2YXRlIGVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBqb2JJbmZvPzogUXVlcnlKb2JJbmZvVjI7XG4gIHByaXZhdGUgbG9jYXRvcj86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb25uOiBDb25uZWN0aW9uPFM+LFxuICAgIG9wdGlvbnM6IEV4aXN0aW5nUXVlcnlKb2JWMk9wdGlvbnMgfCBDcmVhdGVRdWVyeUpvYlYyT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uO1xuICAgIHRoaXMubG9nZ2VyID0gdGhpcy5jb25uZWN0aW9uLl9sb2dMZXZlbFxuICAgICAgPyBnZXRMb2dnZXIoJ2J1bGsyOlF1ZXJ5Sm9iVjInKS5jcmVhdGVJbnN0YW5jZSh0aGlzLmNvbm5lY3Rpb24uX2xvZ0xldmVsKVxuICAgICAgOiBnZXRMb2dnZXIoJ2J1bGsyOlF1ZXJ5Sm9iVjInKTtcbiAgICBpZiAoJ2lkJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLl9pZCA9IG9wdGlvbnMuaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYm9keVBhcmFtcyA9IG9wdGlvbnMuYm9keVBhcmFtcztcbiAgICB9XG4gICAgdGhpcy5wb2xsaW5nT3B0aW9ucyA9IG9wdGlvbnMucG9sbGluZ09wdGlvbnM7XG4gICAgLy8gZGVmYXVsdCBlcnJvciBoYW5kbGVyIHRvIGtlZXAgdGhlIGxhdGVzdCBlcnJvclxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycm9yKSA9PiAodGhpcy5lcnJvciA9IGVycm9yKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBxdWVyeSBqb2IgSUQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHF1ZXJ5IGpvYiBJZC5cbiAgICovXG4gIHB1YmxpYyBnZXQgaWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5qb2JJbmZvID8gdGhpcy5qb2JJbmZvLmlkIDogKHRoaXMuX2lkIGFzIHN0cmluZyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBxdWVyeSBqb2IgaW5mby5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8UXVlcnlKb2JJbmZvVjI+fSBxdWVyeSBqb2IgaW5mb3JtYXRpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0SW5mbygpOiBRdWVyeUpvYkluZm9WMiB7XG4gICAgaWYgKHRoaXMuam9iSW5mbykge1xuICAgICAgcmV0dXJuIHRoaXMuam9iSW5mbztcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnTm8gaW50ZXJuYWwgam9iIGluZm8uIE1ha2Ugc3VyZSB0byBjYWxsIGBhd2FpdCBqb2IuY2hlY2tgLicsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgcXVlcnkgam9iXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPn0gam9iIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgYXN5bmMgb3BlbigpOiBQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPiB7XG4gICAgaWYgKCF0aGlzLmJvZHlQYXJhbXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCBib2R5IHBhcmFtcyB0byBvcGVuIGEgbmV3IHF1ZXJ5IGpvYi4nKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0PFF1ZXJ5Sm9iSW5mb1YyPih7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLmJvZHlQYXJhbXMpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTdWNjZXNzZnVsbHkgY3JlYXRlZCBqb2IgJHt0aGlzLmlkfWApO1xuICAgICAgdGhpcy5lbWl0KCdvcGVuJywgdGhpcy5qb2JJbmZvKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmpvYkluZm87XG4gIH1cblxuICAvKipcbiAgICogQWJvcnQgdGhlIGpvYlxuICAgKlxuICAgKiBUaGUgJ2Fib3J0ZWQnIGV2ZW50IGlzIGVtaXR0ZWQgd2hlbiB0aGUgam9iIHN1Y2Nlc3NmdWxseSBhYm9ydHMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPn0gam9iIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgYXN5bmMgYWJvcnQoKTogUHJvbWlzZTxRdWVyeUpvYkluZm9WMj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0ZTogUXVlcnlKb2JJbmZvVjJbJ3N0YXRlJ10gPSAnQWJvcnRlZCc7XG4gICAgICB0aGlzLmpvYkluZm8gPSBhd2FpdCB0aGlzLmNyZWF0ZVF1ZXJ5UmVxdWVzdDxRdWVyeUpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIHBhdGg6IGAvJHt0aGlzLmlkfWAsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc3RhdGUgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyB9LFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSBhYm9ydGVkIGpvYiAke3RoaXMuaWR9YCk7XG4gICAgICByZXR1cm4gdGhpcy5qb2JJbmZvO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBvbGwgZm9yIHRoZSBzdGF0ZSBvZiB0aGUgcHJvY2Vzc2luZyBmb3IgdGhlIGpvYi5cbiAgICpcbiAgICogQHBhcmFtIGludGVydmFsIFBvbGxpbmcgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB0aW1lb3V0IFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybnMge1Byb21pc2U8UmVjb3JkW10+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBqb2IgZmluaXNoZWQgYmVpbmcgcHJvY2Vzc2VkLlxuICAgKi9cbiAgYXN5bmMgcG9sbChcbiAgICBpbnRlcnZhbDogbnVtYmVyID0gdGhpcy5wb2xsaW5nT3B0aW9ucy5wb2xsSW50ZXJ2YWwsXG4gICAgdGltZW91dDogbnVtYmVyID0gdGhpcy5wb2xsaW5nT3B0aW9ucy5wb2xsVGltZW91dCxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgam9iSWQgPSB0aGlzLmlkO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArIHRpbWVvdXQ7XG5cbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZygnU3RhcnQgcG9sbGluZyBmb3Igam9iIHN0YXR1cycpO1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgYFBvbGxpbmcgb3B0aW9uczogdGltZW91dDoke3RpbWVvdXR9bXMgfCBpbnRlcnZhbDogJHtpbnRlcnZhbH1tcy5gLFxuICAgICk7XG5cbiAgICBpZiAodGltZW91dCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEpvYlBvbGxpbmdUaW1lb3V0RXJyb3IoXG4gICAgICAgIGBTa2lwcGluZyBwb2xsaW5nIGJlY2F1c2Ugb2YgdGltZW91dCA9IDBtcy4gSm9iIElkID0gJHtqb2JJZH1gLFxuICAgICAgICBqb2JJZCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgd2hpbGUgKGVuZFRpbWUgPiBEYXRlLm5vdygpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHN3aXRjaCAocmVzLnN0YXRlKSB7XG4gICAgICAgICAgY2FzZSAnQWJvcnRlZCc6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pvYiBoYXMgYmVlbiBhYm9ydGVkJyk7XG4gICAgICAgICAgY2FzZSAnVXBsb2FkQ29tcGxldGUnOlxuICAgICAgICAgIGNhc2UgJ0luUHJvZ3Jlc3MnOlxuICAgICAgICAgICAgdGhpcy5lbWl0KCdpblByb2dyZXNzJywgcmVzKTtcbiAgICAgICAgICAgIGF3YWl0IGRlbGF5KGludGVydmFsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0ZhaWxlZCc6XG4gICAgICAgICAgICAvLyB1bmxpa2UgaW5nZXN0IGpvYnMsIHRoZSBBUEkgZG9lc24ndCByZXR1cm4gYW4gZXJyb3IgbXNnOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuc2FsZXNmb3JjZS5jb20vZG9jcy9hdGxhcy5lbi11cy5hcGlfYXN5bmNoLm1ldGEvYXBpX2FzeW5jaC9xdWVyeV9nZXRfb25lX2pvYi5odG1cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKHJlcyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1F1ZXJ5IGpvYiBmYWlsZWQgdG8gY29tcGxldGUnKTtcbiAgICAgICAgICBjYXNlICdKb2JDb21wbGV0ZSc6XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgSm9iICR7dGhpcy5pZH0gd2FzIHN1Y2Nlc3NmdWxseSBwcm9jZXNzZWQuYCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2pvYkNvbXBsZXRlJywgcmVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGltZW91dEVycm9yID0gbmV3IEpvYlBvbGxpbmdUaW1lb3V0RXJyb3IoXG4gICAgICBgUG9sbGluZyB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zLiBKb2IgSWQgPSAke2pvYklkfWAsXG4gICAgICBqb2JJZCxcbiAgICApO1xuICAgIHRoaXMuZW1pdCgnZXJyb3InLCB0aW1lb3V0RXJyb3IpO1xuICAgIHRocm93IHRpbWVvdXRFcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0aGUgbGF0ZXN0IGpvYiBzdGF0dXNcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8UXVlcnlKb2JJbmZvVjI+fSBqb2IgaW5mb3JtYXRpb24uXG4gICAqL1xuICBhc3luYyBjaGVjaygpOiBQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpvYkluZm8gPSBhd2FpdCB0aGlzLmNyZWF0ZVF1ZXJ5UmVxdWVzdDxRdWVyeUpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBwYXRoOiBgLyR7dGhpcy5pZH1gLFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5qb2JJbmZvID0gam9iSW5mbztcbiAgICAgIHJldHVybiBqb2JJbmZvO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVzdWx0cyBmb3IgYSBxdWVyeSBqb2IgYXMgYSByZWNvcmQgc3RyZWFtXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgdGhlIGpvYiBmaW5pc2hlZCBiZWluZyBwcm9jZXNzZWRcbiAgICogQHJldHVybnMge1JlY29yZFN0cmVhbX0gLSBSZWNvcmQgc3RyZWFtLCBjb252ZXJ0aWJsZSB0byBhIENTViBkYXRhIHN0cmVhbVxuICAgKi9cbiAgcHVibGljIGFzeW5jIHJlc3VsdCgpOiBQcm9taXNlPFBhcnNhYmxlPFJlY29yZD4+IHtcbiAgICBjb25zdCByZXN1bHRTdHJlYW0gPSBuZXcgUGFyc2FibGUoKTtcbiAgICBjb25zdCByZXN1bHREYXRhU3RyZWFtID0gcmVzdWx0U3RyZWFtLnN0cmVhbSgnY3N2Jyk7XG5cbiAgICBjb25zdCByZXN1bHRzUGF0aCA9IGAvJHt0aGlzLmlkfS9yZXN1bHRzYDtcblxuICAgIHdoaWxlICh0aGlzLmxvY2F0b3IgIT09ICdudWxsJykge1xuICAgICAgY29uc3QgcmVzUHJvbWlzZSA9IHRoaXMuY3JlYXRlUXVlcnlSZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgcGF0aDogdGhpcy5sb2NhdG9yXG4gICAgICAgICAgLy8gcmVzdWx0c1BhdGggc3RhcnRzIHdpdGggJy8nXG4gICAgICAgICAgPyBgJHtyZXN1bHRzUGF0aH0/bG9jYXRvcj0ke3RoaXMubG9jYXRvcn1gXG4gICAgICAgICAgOiByZXN1bHRzUGF0aCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEFjY2VwdDogJ3RleHQvY3N2JyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXNQcm9taXNlLnN0cmVhbSgpLnBpcGUocmVzdWx0RGF0YVN0cmVhbSk7XG4gICAgICBhd2FpdCByZXNQcm9taXNlO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRTdHJlYW07XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhIHF1ZXJ5IGpvYi5cbiAgICovXG4gIGFzeW5jIGRlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVRdWVyeVJlcXVlc3Q8dm9pZD4oe1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIHBhdGg6IGAvJHt0aGlzLmlkfWAsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVF1ZXJ5UmVxdWVzdDxUPihyZXF1ZXN0OiBCdWxrUmVxdWVzdCkge1xuICAgIGNvbnN0IHsgcGF0aCwgcmVzcG9uc2VUeXBlIH0gPSByZXF1ZXN0O1xuXG4gICAgY29uc3QgYmFzZVBhdGggPSBgc2VydmljZXMvZGF0YS92JHt0aGlzLmNvbm5lY3Rpb24udmVyc2lvbn0vam9icy9xdWVyeWA7XG5cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFxuICAgICAgcGF0aCA/IGJhc2VQYXRoICsgcGF0aCA6IGJhc2VQYXRoLFxuICAgICAgdGhpcy5jb25uZWN0aW9uLmluc3RhbmNlVXJsLFxuICAgICkudG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGh0dHBBcGkgPSBuZXcgQnVsa0FwaVYyKHRoaXMuY29ubmVjdGlvbiwgeyByZXNwb25zZVR5cGUgfSk7XG5cbiAgICBodHRwQXBpLm9uKCdyZXNwb25zZScsIChyZXNwb25zZTogSHR0cFJlc3BvbnNlKSA9PiB7XG4gICAgICB0aGlzLmxvY2F0b3IgPSByZXNwb25zZS5oZWFkZXJzWydzZm9yY2UtbG9jYXRvciddO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYHNmb3JjZS1sb2NhdG9yOiAke3RoaXMubG9jYXRvcn1gKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBodHRwQXBpLnJlcXVlc3Q8VD4oe1xuICAgICAgLi4ucmVxdWVzdCxcbiAgICAgIHVybCxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIGZvciBCdWxrIEFQSSBWMiBJbmdlc3QgSm9iXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmdlc3RKb2JWMjxTIGV4dGVuZHMgU2NoZW1hPiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29ubmVjdGlvbjogQ29ubmVjdGlvbjxTPjtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBfaWQ/OiBzdHJpbmc7XG4gIHByaXZhdGUgcmVhZG9ubHkgYm9keVBhcmFtcz86IE5ld0luZ2VzdEpvYk9wdGlvbnM7XG4gIHByaXZhdGUgcmVhZG9ubHkgam9iRGF0YTogSm9iRGF0YVYyPFM+O1xuICBwcml2YXRlIHBvbGxpbmdPcHRpb25zOiBCdWxrVjJQb2xsaW5nT3B0aW9ucztcbiAgcHJpdmF0ZSBidWxrSm9iU3VjY2Vzc2Z1bFJlc3VsdHM/OiBJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPFM+O1xuICBwcml2YXRlIGJ1bGtKb2JGYWlsZWRSZXN1bHRzPzogSW5nZXN0Sm9iVjJGYWlsZWRSZXN1bHRzPFM+O1xuICBwcml2YXRlIGJ1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHM/OiBJbmdlc3RKb2JWMlVucHJvY2Vzc2VkUmVjb3JkczxTPjtcbiAgcHJpdmF0ZSBlcnJvcjogRXJyb3IgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgam9iSW5mbz86IEpvYkluZm9WMjtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbm46IENvbm5lY3Rpb248Uz4sXG4gICAgb3B0aW9uczogQ3JlYXRlSW5nZXN0Sm9iVjJPcHRpb25zIHwgRXhpc3RpbmdJbmdlc3RKb2JPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5jb25uZWN0aW9uID0gY29ubjtcbiAgICB0aGlzLmxvZ2dlciA9IHRoaXMuY29ubmVjdGlvbi5fbG9nTGV2ZWxcbiAgICAgID8gZ2V0TG9nZ2VyKCdidWxrMjpJbmdlc3RKb2JWMicpLmNyZWF0ZUluc3RhbmNlKHRoaXMuY29ubmVjdGlvbi5fbG9nTGV2ZWwpXG4gICAgICA6IGdldExvZ2dlcignYnVsazI6SW5nZXN0Sm9iVjInKTtcbiAgICB0aGlzLnBvbGxpbmdPcHRpb25zID0gb3B0aW9ucy5wb2xsaW5nT3B0aW9ucztcbiAgICBpZiAoJ2lkJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLl9pZCA9IG9wdGlvbnMuaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYm9keVBhcmFtcyA9IG9wdGlvbnMuYm9keVBhcmFtcztcbiAgICB9XG4gICAgdGhpcy5qb2JEYXRhID0gbmV3IEpvYkRhdGFWMjxTPih7XG4gICAgICBjcmVhdGVSZXF1ZXN0OiAocmVxdWVzdCkgPT4gdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0KHJlcXVlc3QpLFxuICAgICAgam9iOiB0aGlzLFxuICAgIH0pO1xuICAgIC8vIGRlZmF1bHQgZXJyb3IgaGFuZGxlciB0byBrZWVwIHRoZSBsYXRlc3QgZXJyb3JcbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnJvcikgPT4gKHRoaXMuZXJyb3IgPSBlcnJvcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcXVlcnkgam9iIElELlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBxdWVyeSBqb2IgSWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuam9iSW5mbyA/IHRoaXMuam9iSW5mby5pZCA6ICh0aGlzLl9pZCBhcyBzdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcXVlcnkgam9iIGluZm8uXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFF1ZXJ5Sm9iSW5mb1YyPn0gaW5nZXN0IGpvYiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIHB1YmxpYyBnZXRJbmZvKCk6IEpvYkluZm9WMiB7XG4gICAgaWYgKHRoaXMuam9iSW5mbykge1xuICAgICAgcmV0dXJuIHRoaXMuam9iSW5mbztcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnTm8gaW50ZXJuYWwgam9iIGluZm8uIE1ha2Ugc3VyZSB0byBjYWxsIGBhd2FpdCBqb2IuY2hlY2tgLicsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBqb2IgcmVwcmVzZW50aW5nIGEgYnVsayBvcGVyYXRpb24gaW4gdGhlIG9yZ1xuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxRdWVyeUpvYkluZm9WMj59IGpvYiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGFzeW5jIG9wZW4oKTogUHJvbWlzZTxQYXJ0aWFsPEpvYkluZm9WMj4+IHtcbiAgICBpZiAoIXRoaXMuYm9keVBhcmFtcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGJvZHkgcGFyYW1zIHRvIG9wZW4gYSBuZXcgaW5nZXN0IGpvYi4nKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5qb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5ib2R5UGFyYW1zKSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgam9iICR7dGhpcy5pZH1gKTtcbiAgICAgIHRoaXMuZW1pdCgnb3BlbicpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuam9iSW5mbztcbiAgfVxuXG4gIC8qKiBVcGxvYWQgZGF0YSBmb3IgYSBqb2IgaW4gQ1NWIGZvcm1hdFxuICAgKlxuICAgKiAgQHBhcmFtIGlucHV0IENTViBhcyBhIHN0cmluZywgb3IgYXJyYXkgb2YgcmVjb3JkcyBvciByZWFkYWJsZSBzdHJlYW1cbiAgICovXG4gIGFzeW5jIHVwbG9hZERhdGEoaW5wdXQ6IHN0cmluZyB8IFJlY29yZFtdIHwgUmVhZGFibGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmpvYkRhdGEuZXhlY3V0ZShpbnB1dCkucmVzdWx0O1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTdWNjZXNzZnVsbHkgdXBsb2FkZWQgZGF0YSB0byBqb2IgJHt0aGlzLmlkfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIG9wZW5lZCBqb2JcbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBub3RpZnkgdGhlIG9yZyAgdGhhdCB0aGUgdXBsb2FkIG9mIGpvYiBkYXRhIGlzIGNvbXBsZXRlIGFuZCBpcyByZWFkeSBmb3IgcHJvY2Vzc2luZy5cbiAgICovXG4gIGFzeW5jIGNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0ZTogSm9iSW5mb1YyWydzdGF0ZSddID0gJ1VwbG9hZENvbXBsZXRlJztcbiAgICAgIHRoaXMuam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDxKb2JJbmZvVjI+KHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBwYXRoOiBgLyR7dGhpcy5pZH1gLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHN0YXRlIH0pLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcgfSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTdWNjZXNzZnVsbHkgY2xvc2VkIGpvYiAke3RoaXMuaWR9YCk7XG4gICAgICB0aGlzLmVtaXQoJ2Nsb3NlJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzdGF0dXMgdG8gYWJvcnRcbiAgICovXG4gIGFzeW5jIGFib3J0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGF0ZTogSm9iSW5mb1YyWydzdGF0ZSddID0gJ0Fib3J0ZWQnO1xuICAgICAgdGhpcy5qb2JJbmZvID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PEpvYkluZm9WMj4oe1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIHBhdGg6IGAvJHt0aGlzLmlkfWAsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc3RhdGUgfSksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyB9LFxuICAgICAgICByZXNwb25zZVR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSBhYm9ydGVkIGpvYiAke3RoaXMuaWR9YCk7XG4gICAgICB0aGlzLmVtaXQoJ2Fib3J0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQb2xsIGZvciB0aGUgc3RhdGUgb2YgdGhlIHByb2Nlc3NpbmcgZm9yIHRoZSBqb2IuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgb25seSB0aHJvdyBhZnRlciBhIHRpbWVvdXQuIFRvIGNhcHR1cmUgYVxuICAgKiBqb2IgZmFpbHVyZSB3aGlsZSBwb2xsaW5nIHlvdSBtdXN0IHNldCBhIGxpc3RlbmVyIGZvciB0aGVcbiAgICogYGZhaWxlZGAgZXZlbnQgYmVmb3JlIGNhbGxpbmcgaXQ6XG4gICAqXG4gICAqIGpvYi5vbignZmFpbGVkJywgKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgKiBhd2FpdCBqb2IucG9sbCgpXG4gICAqXG4gICAqIEBwYXJhbSBpbnRlcnZhbCBQb2xsaW5nIGludGVydmFsIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0gdGltZW91dCBQb2xsaW5nIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBqb2IgZmluaXNoZXMgc3VjY2Vzc2Z1bGx5XG4gICAqL1xuICBhc3luYyBwb2xsKFxuICAgIGludGVydmFsOiBudW1iZXIgPSB0aGlzLnBvbGxpbmdPcHRpb25zLnBvbGxJbnRlcnZhbCxcbiAgICB0aW1lb3V0OiBudW1iZXIgPSB0aGlzLnBvbGxpbmdPcHRpb25zLnBvbGxUaW1lb3V0LFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBqb2JJZCA9IHRoaXMuaWQ7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBlbmRUaW1lID0gc3RhcnRUaW1lICsgdGltZW91dDtcblxuICAgIGlmICh0aW1lb3V0ID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgSm9iUG9sbGluZ1RpbWVvdXRFcnJvcihcbiAgICAgICAgYFNraXBwaW5nIHBvbGxpbmcgYmVjYXVzZSBvZiB0aW1lb3V0ID0gMG1zLiBKb2IgSWQgPSAke2pvYklkfWAsXG4gICAgICAgIGpvYklkLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZygnU3RhcnQgcG9sbGluZyBmb3Igam9iIHN0YXR1cycpO1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgYFBvbGxpbmcgb3B0aW9uczogdGltZW91dDoke3RpbWVvdXR9bXMgfCBpbnRlcnZhbDogJHtpbnRlcnZhbH1tcy5gLFxuICAgICk7XG5cbiAgICB3aGlsZSAoZW5kVGltZSA+IERhdGUubm93KCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2hlY2soKTtcbiAgICAgICAgc3dpdGNoIChyZXMuc3RhdGUpIHtcbiAgICAgICAgICBjYXNlICdPcGVuJzpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgJ0pvYiBpcyBzdGlsbCBvcGVuLiBNYWtlIHN1cmUgY2xvc2UgdGhlIGpvYiBieSBgY2xvc2VgIG1ldGhvZCBvbiB0aGUgam9iIGluc3RhbmNlIGJlZm9yZSBwb2xsaW5nLicsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNhc2UgJ0Fib3J0ZWQnOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKb2IgaGFzIGJlZW4gYWJvcnRlZCcpO1xuICAgICAgICAgIGNhc2UgJ1VwbG9hZENvbXBsZXRlJzpcbiAgICAgICAgICBjYXNlICdJblByb2dyZXNzJzpcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaW5Qcm9ncmVzcycsIHJlcyk7XG4gICAgICAgICAgICBhd2FpdCBkZWxheShpbnRlcnZhbCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdGYWlsZWQnOlxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcocmVzKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYEluZ2VzdCBqb2IgZmFpbGVkIHRvIGNvbXBsZXRlIGR1ZSB0bzogJHtyZXMuZXJyb3JNZXNzYWdlfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGNhc2UgJ0pvYkNvbXBsZXRlJzpcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBKb2IgJHt0aGlzLmlkfSB3YXMgc3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZC5gKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnam9iQ29tcGxldGUnLCByZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgSm9iUG9sbGluZ1RpbWVvdXRFcnJvcihcbiAgICAgIGBQb2xsaW5nIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuIEpvYiBJZCA9ICR7am9iSWR9YCxcbiAgICAgIGpvYklkLFxuICAgICk7XG4gICAgdGhpcy5lbWl0KCdlcnJvcicsIHRpbWVvdXRFcnJvcik7XG4gICAgdGhyb3cgdGltZW91dEVycm9yO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSBsYXRlc3QgYmF0Y2ggc3RhdHVzIGluIHNlcnZlclxuICAgKi9cbiAgYXN5bmMgY2hlY2soKTogUHJvbWlzZTxKb2JJbmZvVjI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgam9iSW5mbyA9IGF3YWl0IHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDxKb2JJbmZvVjI+KHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgcGF0aDogYC8ke3RoaXMuaWR9YCxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuam9iSW5mbyA9IGpvYkluZm87XG4gICAgICByZXR1cm4gam9iSW5mbztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBSZXR1cm4gYWxsIHJlY29yZCByZXN1bHRzXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIHN1Y2Nlc3NmdWwsIGZhaWxlZCBhbmQgdW5wcm9jZXNzZWQgcmVjb3Jkc1xuICAgKlxuICAgKiBAcmV0dXJucyBQcm9taXNlPEluZ2VzdEpvYlYyUmVzdWx0cz5cbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRBbGxSZXN1bHRzKCk6IFByb21pc2U8SW5nZXN0Sm9iVjJSZXN1bHRzPFM+PiB7XG4gICAgY29uc3QgW1xuICAgICAgc3VjY2Vzc2Z1bFJlc3VsdHMsXG4gICAgICBmYWlsZWRSZXN1bHRzLFxuICAgICAgdW5wcm9jZXNzZWRSZWNvcmRzLFxuICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmdldFN1Y2Nlc3NmdWxSZXN1bHRzKCksXG4gICAgICB0aGlzLmdldEZhaWxlZFJlc3VsdHMoKSxcbiAgICAgIHRoaXMuZ2V0VW5wcm9jZXNzZWRSZWNvcmRzKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIHsgc3VjY2Vzc2Z1bFJlc3VsdHMsIGZhaWxlZFJlc3VsdHMsIHVucHJvY2Vzc2VkUmVjb3JkcyB9O1xuICB9XG5cbiAgLyoqIFJldHVybiBzdWNjZXNzZnVsIHJlc3VsdHNcbiAgICpcbiAgICogVGhlIG9yZGVyIG9mIHJlY29yZHMgcmV0dXJuZWQgaXMgbm90IGd1YXJhbnRlZWQgdG8gbWF0Y2ggdGhlIG9yZGVyaW5nIG9mIHRoZSB1cGxvYWRlZCBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJhdyBHZXQgcmVzdWx0cyBhcyBhIENTViBzdHJpbmdcbiAgICogQHJldHVybnMgUHJvbWlzZTxJbmdlc3RKb2JWMlN1Y2Nlc3NmdWxSZXN1bHRzPlxuICAgKi9cbiAgYXN5bmMgZ2V0U3VjY2Vzc2Z1bFJlc3VsdHMocmF3PzogZmFsc2UpOiBQcm9taXNlPEluZ2VzdEpvYlYyU3VjY2Vzc2Z1bFJlc3VsdHM8Uz4+XG4gIC8qKiBSZXR1cm4gc3VjY2Vzc2Z1bCByZXN1bHRzXG4gICAqXG4gICAqIFRoZSBvcmRlciBvZiByZWNvcmRzIHJldHVybmVkIGlzIG5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZSBvcmRlcmluZyBvZiB0aGUgdXBsb2FkZWQgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSByYXcgR2V0IHJlc3VsdHMgYXMgYSBDU1Ygc3RyaW5nXG4gICAqIEByZXR1cm5zIFByb21pc2U8c3RyaW5nPlxuICAgKi9cbiAgYXN5bmMgZ2V0U3VjY2Vzc2Z1bFJlc3VsdHMocmF3OiB0cnVlKTogUHJvbWlzZTxzdHJpbmc+XG4gIGFzeW5jIGdldFN1Y2Nlc3NmdWxSZXN1bHRzKHJhdz86IGJvb2xlYW4pOiBQcm9taXNlPEluZ2VzdEpvYlYyU3VjY2Vzc2Z1bFJlc3VsdHM8Uz4gfCBzdHJpbmc+IHtcbiAgICBjb25zdCByZXFPcHRzOiBCdWxrUmVxdWVzdCA9IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXRoOiBgLyR7dGhpcy5pZH0vc3VjY2Vzc2Z1bFJlc3VsdHNgLFxuICAgIH1cblxuICAgIGlmIChyYXcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUluZ2VzdFJlcXVlc3Q8c3RyaW5nPih7XG4gICAgICAgIC4uLnJlcU9wdHMsXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQvcGxhaW4nLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5idWxrSm9iU3VjY2Vzc2Z1bFJlc3VsdHMpIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cztcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PFxuICAgICAgSW5nZXN0Sm9iVjJTdWNjZXNzZnVsUmVzdWx0czxTPiB8IHVuZGVmaW5lZFxuICAgID4oe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhdGg6IGAvJHt0aGlzLmlkfS9zdWNjZXNzZnVsUmVzdWx0c2AsXG4gICAgICByZXNwb25zZVR5cGU6ICd0ZXh0L2NzdicsXG4gICAgfSk7XG5cbiAgICB0aGlzLmJ1bGtKb2JTdWNjZXNzZnVsUmVzdWx0cyA9IHJlc3VsdHMgPz8gW107XG5cbiAgICByZXR1cm4gdGhpcy5idWxrSm9iU3VjY2Vzc2Z1bFJlc3VsdHM7XG4gIH1cblxuICAvKiogUmV0dXJuIGZhaWxlZCByZXN1bHRzXG4gICAqXG4gICAqIFRoZSBvcmRlciBvZiByZWNvcmRzIGluIHRoZSByZXNwb25zZSBpcyBub3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGUgb3JkZXJpbmcgb2YgcmVjb3JkcyBpbiB0aGUgb3JpZ2luYWwgam9iIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmF3IEdldCByZXN1bHRzIGFzIGEgQ1NWIHN0cmluZ1xuICAgKiBAcmV0dXJucyBQcm9taXNlPEluZ2VzdEpvYlYyU3VjY2Vzc2Z1bFJlc3VsdHM+XG4gICAqL1xuICBhc3luYyBnZXRGYWlsZWRSZXN1bHRzKHJhdz86IGZhbHNlKTogUHJvbWlzZTxJbmdlc3RKb2JWMkZhaWxlZFJlc3VsdHM8Uz4+XG4gIC8qKiBSZXR1cm4gZmFpbGVkIHJlc3VsdHNcbiAgICpcbiAgICogVGhlIG9yZGVyIG9mIHJlY29yZHMgaW4gdGhlIHJlc3BvbnNlIGlzIG5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZSBvcmRlcmluZyBvZiByZWNvcmRzIGluIHRoZSBvcmlnaW5hbCBqb2IgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSByYXcgR2V0IHJlc3VsdHMgYXMgYSBDU1Ygc3RyaW5nXG4gICAqIEByZXR1cm5zIFByb21pc2U8c3RyaW5nPlxuICAgKi9cbiAgYXN5bmMgZ2V0RmFpbGVkUmVzdWx0cyhyYXc6IHRydWUpOiBQcm9taXNlPHN0cmluZz5cbiAgYXN5bmMgZ2V0RmFpbGVkUmVzdWx0cyhyYXc/OiBib29sZWFuKTogUHJvbWlzZTxJbmdlc3RKb2JWMkZhaWxlZFJlc3VsdHM8Uz4gfCBzdHJpbmc+IHtcbiAgICBjb25zdCByZXFPcHRzOiBCdWxrUmVxdWVzdCA9IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXRoOiBgLyR7dGhpcy5pZH0vZmFpbGVkUmVzdWx0c2AsXG4gICAgfVxuXG4gICAgaWYgKHJhdykge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDxzdHJpbmc+KHtcbiAgICAgICAgLi4ucmVxT3B0cyxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dC9wbGFpbicsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmJ1bGtKb2JGYWlsZWRSZXN1bHRzKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWxrSm9iRmFpbGVkUmVzdWx0cztcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PFxuICAgICAgSW5nZXN0Sm9iVjJGYWlsZWRSZXN1bHRzPFM+IHwgdW5kZWZpbmVkXG4gICAgPih7XG4gICAgICAuLi5yZXFPcHRzLFxuICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dC9jc3YnLFxuICAgIH0pO1xuXG4gICAgdGhpcy5idWxrSm9iRmFpbGVkUmVzdWx0cyA9IHJlc3VsdHMgPz8gW107XG5cbiAgICByZXR1cm4gdGhpcy5idWxrSm9iRmFpbGVkUmVzdWx0cztcbiAgfVxuXG4gIC8qKiBSZXR1cm4gdW5wcm9jZXNzZWQgcmVzdWx0c1xuICAgKlxuICAgKiBUaGUgdW5wcm9jZXNzZWQgcmVjb3JkcyBlbmRwb2ludCByZXR1cm5zIHJlY29yZHMgYXMgYSBDU1YuXG4gICAqIElmIHRoZSByZXF1ZXN0IGhlbHBlciBpcyBhYmxlIHRvIHBhcnNlIGl0LCB5b3UgZ2V0IHRoZSByZWNvcmRzXG4gICAqIGFzIGFuIGFycmF5IG9mIG9iamVjdHMuXG4gICAqIElmIHVuYWJsZSB0byBwYXJzZSBpdCAoYmFkIENTViksIHlvdSBnZXQgdGhlIHJhdyByZXNwb25zZSBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogVGhlIG9yZGVyIG9mIHJlY29yZHMgaW4gdGhlIHJlc3BvbnNlIGlzIG5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZSBvcmRlcmluZyBvZiByZWNvcmRzIGluIHRoZSBvcmlnaW5hbCBqb2IgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSByYXcgR2V0IHJlc3VsdHMgYXMgYSBDU1Ygc3RyaW5nXG4gICAqIEByZXR1cm5zIFByb21pc2U8SW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM+XG4gICAqL1xuICBhc3luYyBnZXRVbnByb2Nlc3NlZFJlY29yZHMocmF3PzogZmFsc2UpOiBQcm9taXNlPEluZ2VzdEpvYlYyVW5wcm9jZXNzZWRSZWNvcmRzPFM+PlxuICAgIC8qKiBSZXR1cm4gdW5wcm9jZXNzZWQgcmVzdWx0c1xuICAgKlxuICAgKiBUaGUgdW5wcm9jZXNzZWQgcmVjb3JkcyBlbmRwb2ludCByZXR1cm5zIHJlY29yZHMgYXMgYSBDU1YuXG4gICAqIElmIHRoZSByZXF1ZXN0IGhlbHBlciBpcyBhYmxlIHRvIHBhcnNlIGl0LCB5b3UgZ2V0IHRoZSByZWNvcmRzXG4gICAqIGFzIGFuIGFycmF5IG9mIG9iamVjdHMuXG4gICAqIElmIHVuYWJsZSB0byBwYXJzZSBpdCAoYmFkIENTViksIHlvdSBnZXQgdGhlIHJhdyByZXNwb25zZSBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogVGhlIG9yZGVyIG9mIHJlY29yZHMgaW4gdGhlIHJlc3BvbnNlIGlzIG5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZSBvcmRlcmluZyBvZiByZWNvcmRzIGluIHRoZSBvcmlnaW5hbCBqb2IgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSByYXcgR2V0IHJlc3VsdHMgYXMgYSBDU1Ygc3RyaW5nXG4gICAqIEByZXR1cm5zIFByb21pc2U8c3RyaW5nPlxuICAgKi9cbiAgYXN5bmMgZ2V0VW5wcm9jZXNzZWRSZWNvcmRzKHJhdzogdHJ1ZSk6IFByb21pc2U8c3RyaW5nPlxuICBhc3luYyBnZXRVbnByb2Nlc3NlZFJlY29yZHMocmF3PzogYm9vbGVhbik6IFByb21pc2U8SW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM8Uz4+IHtcbiAgICBjb25zdCByZXFPcHRzOiBCdWxrUmVxdWVzdCA9IHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXRoOiBgLyR7dGhpcy5pZH0vdW5wcm9jZXNzZWRyZWNvcmRzYCxcbiAgICB9XG5cbiAgICBpZiAocmF3KSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PHN0cmluZz4oe1xuICAgICAgICAuLi5yZXFPcHRzLFxuICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0L3BsYWluJyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3Jkcykge1xuICAgICAgcmV0dXJuIHRoaXMuYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3JkcztcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5jcmVhdGVJbmdlc3RSZXF1ZXN0PFxuICAgICAgSW5nZXN0Sm9iVjJVbnByb2Nlc3NlZFJlY29yZHM8Uz4gfCB1bmRlZmluZWRcbiAgICA+KHtcbiAgICAgIC4uLnJlcU9wdHMsXG4gICAgICByZXNwb25zZVR5cGU6ICd0ZXh0L2NzdicsXG4gICAgfSk7XG5cbiAgICB0aGlzLmJ1bGtKb2JVbnByb2Nlc3NlZFJlY29yZHMgPSByZXN1bHRzID8/IFtdO1xuXG4gICAgcmV0dXJuIHRoaXMuYnVsa0pvYlVucHJvY2Vzc2VkUmVjb3JkcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFuIGluZ2VzdCBqb2IuXG4gICAqL1xuICBhc3luYyBkZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSW5nZXN0UmVxdWVzdDx2b2lkPih7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgcGF0aDogYC8ke3RoaXMuaWR9YCxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlSW5nZXN0UmVxdWVzdDxUPihyZXF1ZXN0OiBCdWxrUmVxdWVzdCkge1xuICAgIGNvbnN0IHsgcGF0aCwgcmVzcG9uc2VUeXBlIH0gPSByZXF1ZXN0O1xuICAgIGNvbnN0IGJhc2VQYXRoID0gYC9zZXJ2aWNlcy9kYXRhL3Yke3RoaXMuY29ubmVjdGlvbi52ZXJzaW9ufS9qb2JzL2luZ2VzdGA7XG5cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFxuICAgICAgcGF0aCA/IGJhc2VQYXRoICsgcGF0aCA6IGJhc2VQYXRoLFxuICAgICAgdGhpcy5jb25uZWN0aW9uLmluc3RhbmNlVXJsLFxuICAgICkudG9TdHJpbmcoKTtcblxuICAgIHJldHVybiBuZXcgQnVsa0FwaVYyKHRoaXMuY29ubmVjdGlvbiwgeyByZXNwb25zZVR5cGUgfSkucmVxdWVzdDxUPih7XG4gICAgICAuLi5yZXF1ZXN0LFxuICAgICAgdXJsLFxuICAgIH0pO1xuICB9XG59XG5cbmNsYXNzIEpvYkRhdGFWMjxTIGV4dGVuZHMgU2NoZW1hPiBleHRlbmRzIFdyaXRhYmxlIHtcbiAgcmVhZG9ubHkgam9iOiBJbmdlc3RKb2JWMjxTPjtcbiAgcmVhZG9ubHkgdXBsb2FkU3RyZWFtOiBTZXJpYWxpemFibGU7XG4gIHJlYWRvbmx5IGRvd25sb2FkU3RyZWFtOiBQYXJzYWJsZTtcbiAgcmVhZG9ubHkgZGF0YVN0cmVhbTogRHVwbGV4O1xuICByZXN1bHQ6IGFueTtcblxuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENyZWF0ZUpvYkRhdGFWMk9wdGlvbnM8Uz4pIHtcbiAgICBzdXBlcih7IG9iamVjdE1vZGU6IHRydWUgfSk7XG5cbiAgICBjb25zdCBjcmVhdGVSZXF1ZXN0ID0gb3B0aW9ucy5jcmVhdGVSZXF1ZXN0O1xuXG4gICAgdGhpcy5qb2IgPSBvcHRpb25zLmpvYjtcbiAgICB0aGlzLnVwbG9hZFN0cmVhbSA9IG5ldyBTZXJpYWxpemFibGUoKTtcbiAgICB0aGlzLmRvd25sb2FkU3RyZWFtID0gbmV3IFBhcnNhYmxlKCk7XG5cbiAgICBjb25zdCBjb252ZXJ0ZXJPcHRpb25zID0geyBudWxsVmFsdWU6ICcjTi9BJyB9O1xuICAgIGNvbnN0IHVwbG9hZERhdGFTdHJlYW0gPSB0aGlzLnVwbG9hZFN0cmVhbS5zdHJlYW0oJ2NzdicsIGNvbnZlcnRlck9wdGlvbnMpO1xuICAgIGNvbnN0IGRvd25sb2FkRGF0YVN0cmVhbSA9IHRoaXMuZG93bmxvYWRTdHJlYW0uc3RyZWFtKFxuICAgICAgJ2NzdicsXG4gICAgICBjb252ZXJ0ZXJPcHRpb25zLFxuICAgICk7XG5cbiAgICB0aGlzLmRhdGFTdHJlYW0gPSBjb25jYXRTdHJlYW1zQXNEdXBsZXgoXG4gICAgICB1cGxvYWREYXRhU3RyZWFtLFxuICAgICAgZG93bmxvYWREYXRhU3RyZWFtLFxuICAgICk7XG5cbiAgICB0aGlzLm9uKCdmaW5pc2gnLCAoKSA9PiB0aGlzLnVwbG9hZFN0cmVhbS5lbmQoKSk7XG5cbiAgICB1cGxvYWREYXRhU3RyZWFtLm9uY2UoJ3JlYWRhYmxlJywgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gcGlwZSB1cGxvYWQgZGF0YSB0byBiYXRjaCBBUEkgcmVxdWVzdCBzdHJlYW1cbiAgICAgICAgY29uc3QgcmVxID0gY3JlYXRlUmVxdWVzdCh7XG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICBwYXRoOiBgLyR7dGhpcy5qb2IuaWR9L2JhdGNoZXNgLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9jc3YnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgncmVzcG9uc2UnLCByZXMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHVwbG9hZERhdGFTdHJlYW0ucGlwZShyZXEuc3RyZWFtKCkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX3dyaXRlKHJlY29yZF86IFJlY29yZCwgZW5jOiBCdWZmZXJFbmNvZGluZywgY2I6ICgpID0+IHZvaWQpIHtcbiAgICBjb25zdCB7IElkLCB0eXBlLCBhdHRyaWJ1dGVzLCAuLi5ycmVjIH0gPSByZWNvcmRfO1xuICAgIGxldCByZWNvcmQ7XG4gICAgc3dpdGNoICh0aGlzLmpvYi5nZXRJbmZvKCkub3BlcmF0aW9uKSB7XG4gICAgICBjYXNlICdpbnNlcnQnOlxuICAgICAgICByZWNvcmQgPSBycmVjO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICBjYXNlICdoYXJkRGVsZXRlJzpcbiAgICAgICAgcmVjb3JkID0geyBJZCB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlY29yZCA9IHsgSWQsIC4uLnJyZWMgfTtcbiAgICB9XG4gICAgdGhpcy51cGxvYWRTdHJlYW0ud3JpdGUocmVjb3JkLCBlbmMsIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGR1cGxleCBzdHJlYW0gd2hpY2ggYWNjZXB0cyBDU1YgZGF0YSBpbnB1dCBhbmQgYmF0Y2ggcmVzdWx0IG91dHB1dFxuICAgKi9cbiAgc3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFTdHJlYW07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBiYXRjaCBvcGVyYXRpb25cbiAgICovXG4gIGV4ZWN1dGUoaW5wdXQ/OiBzdHJpbmcgfCBSZWNvcmRbXSB8IFJlYWRhYmxlKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgY2FuIG9ubHkgYmUgdXBsb2FkZWQgdG8gYSBqb2Igb25jZS4nKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdCA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMub25jZSgncmVzcG9uc2UnLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgdGhpcy5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBpZiAoaXMubm9kZVN0cmVhbShpbnB1dCkpIHtcbiAgICAgIC8vIGlmIGlucHV0IGhhcyBzdHJlYW0uUmVhZGFibGUgaW50ZXJmYWNlXG4gICAgICBpbnB1dC5waXBlKHRoaXMuZGF0YVN0cmVhbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlY29yZERhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoaW5wdXQpO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWNvcmREYXRhKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiByZWNvcmREYXRhKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmVjb3JkKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmRba2V5XSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgIHJlY29yZFtrZXldID0gU3RyaW5nKHJlY29yZFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy53cml0ZShyZWNvcmQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWNvcmREYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmRhdGFTdHJlYW0ud3JpdGUocmVjb3JkRGF0YSwgJ3V0ZjgnKTtcbiAgICAgICAgdGhpcy5kYXRhU3RyZWFtLmVuZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcbiAqIFJlZ2lzdGVyIGhvb2sgaW4gY29ubmVjdGlvbiBpbnN0YW50aWF0aW9uIGZvciBkeW5hbWljYWxseSBhZGRpbmcgdGhpcyBBUEkgbW9kdWxlIGZlYXR1cmVzXG4gKi9cbnJlZ2lzdGVyTW9kdWxlKCdidWxrMicsIChjb25uKSA9PiBuZXcgQnVsa1YyKGNvbm4pKTtcblxuZXhwb3J0IGRlZmF1bHQgQnVsa1YyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxTQUFTQSxZQUFZ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